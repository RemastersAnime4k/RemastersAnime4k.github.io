<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>8 Man エイトマン 1963</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Roboto&display=swap" rel="stylesheet" fetchpriority="high">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <style>
        :root {
            --primary-color: #ff6b6b;
            --secondary-color: #4ecdc4;
            --tertiary-color: #ffd166;
            --glass-bg: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.2);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            --color1: #ffcccc;
            --color2: #ccffff;
            --color3: #ffd9cc;
            --color4: #ccfffc;
            --unified-transition-duration: 0.35s;
            --unified-transition-timing: cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        body {
            background: linear-gradient(135deg, var(--color1), var(--color2), var(--color3), var(--color4));
            background-size: 400% 400%;
            animation: gradientFlow 20s ease infinite;
            margin: 0;
            padding: 100px 20px 20px; /* Añadir padding-top para navbar fija */
			padding-top: 100px;
            min-height: 100vh;
            font-family: 'Comic Neue', cursive;
        }

        .sr-only { /* Utility class for accessibility */
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        .detail-nav {
            backdrop-filter: blur(10px);
            background: var(--glass-bg);
            border-radius: 15px;
            padding: 0.8rem 2rem;
			margin: 0 auto 2rem;
            display: flex;
			align-items: center;
            justify-content: space-between;
			gap: 2rem;
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            z-index: 1000;
            box-shadow: 8px 8px 16px #d1d1d1, -8px -8px 16px #ffffff;
            border: 2px solid rgba(255, 255, 255, 0.3);
            font-family: 'Comic Neue', cursive;
			transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
			transform: translateY(0);

        }

		.nav-hidden {
			transform: translateY(-150%);
		}

        .site-title-detail {
            color: #2d3436;
            font-size: 1.8rem;
			margin: 0;
			flex-shrink: 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            font-weight: 700;
			cursor: default;
			user-select: none;
        }

        .back-button {
            background: var(--primary-color);
            color: white;
            padding: 0.8rem 2rem;
			margin-left: auto;
            border-radius: 30px;
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 700;
            border: 2px solid white;
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
            font-family: 'Comic Neue', cursive;
        }

		.back-button:hover {
			transform: translateY(-2px);
			box-shadow: 3px 3px 6px #d1d1d1, -3px -3px 6px #ffffff;
		}

        .anime-container {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 2rem;
			margin: 40px auto;
			max-width: 1200px;
        }

		.full-width-section {
			grid-column: 1 / -1;
			width: 100%;
			max-width: 100vw;
			margin: 2rem 0;
		}


		.manga-library,
		.episodes-main-container {
			max-width: 1400px; /* O el ancho que prefieras */
			margin: 0 auto;
			padding: 2rem;
		}

        .anime-cover {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 1.5rem;
            border: 2px solid #fff;
			text-align: center;
            height: fit-content;
			box-shadow: 8px 8px 16px #d1d1d1, -8px -8px 16px #ffffff;
        }

        .anime-cover img {
            width: 100%;
			max-width: 400px;
            border-radius: 15px;
            border: 3px solid white;
            aspect-ratio: 3/4;
			/*object-fit: cover; eliminar si es que la imagen esta con un zoom */
			transition: transform 0.3s ease;
        }

        .anime-info {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2.5rem;
            border: 2px solid #fff;
			box-shadow: 8px 8px 16px #d1d1d1, -8px -8px 16px #ffffff;
        }

		.anime-description {
			font-size: 1rem;
			line-height: 1.6;
			color: #2d3436;
			padding: 1.5rem;
			background: rgba(255 255 255 / 50%);
			border-radius: 15px;
			margin: 2rem 0;
		}

		/* Contenedor de detalles */
		.detail-boxes {
			display: flex;
			gap: 1rem;
			flex-wrap: wrap;
			margin: 1.5rem 0;
			align-items: center;
			justify-content: center;
		}

		/* Burbujas/Recuadros de información */
		.detail-item {
			background: rgba(255, 255, 255, 0.9);
			backdrop-filter: blur(5px);
			padding: 1rem 1.5rem;
			border-radius: 20px;
			border: 2px solid white;
			min-width: 120px;
			text-align: center;
			box-shadow: 3px 3px 6px rgba(0,0,0,0.1);
			transition: all 0.3s ease;
		}

		.detail-item:hover {
			transform: translateY(-3px);
			box-shadow: 5px 5px 10px rgba(0,0,0,0.15);
		}

		.detail-label {
			color: var(--primary-color);
			font-size: 0.85rem;
			font-weight: bold;
			margin-bottom: 0.3rem;
			display: block;
		}

		.detail-value {
			color: #2d3436;
			font-size: 1.1rem;
			font-weight: 700;
			margin: 0;
		}

		/* Contenedor de selectores de idioma */
		.format-selector {
			display: inline-flex;
			gap: 1.5rem;
			background: var(--glass-bg);
			backdrop-filter: blur(10px);
			padding: 1rem;
			border-radius: 20px;
			border: 2px solid white;
			box-shadow: 8px 8px 16px #d1d1d1, -8px -8px 16px #ffffff;
		}

		/* Estilos de los botones de idioma */
		.format-button {
			padding: 1rem 2rem;
			border-radius: 15px;
			border: 2px solid transparent;
			background: rgba(255, 255, 255, 0.9);
			cursor: pointer;
			transition: all 0.3s ease;
			font-family: 'Comic Neue', cursive;
			font-weight: 700;
			display: flex;
			align-items: center;
			gap: 0.8rem;
		}

		.format-button.active {
			background: var(--primary-color);
			color: white;
			border-color: white;
			box-shadow: 3px 3px 6px rgba(0,0,0,0.1);
		}

		.format-button:hover:not(.active) {
			transform: translateY(-3px);
			background: rgba(255, 255, 255, 0.95);
		}

		/* Nuevo contenedor para centrar */
		.language-selector-container {
			grid-column: 1 / -1; /* Ocupa todo el ancho del grid */
			text-align: center;
			margin: 2rem 0;
		}

		/* Contenedor principal vertical */
		.manga-library {
			background: var(--glass-bg);
			backdrop-filter: blur(10px);
			border-radius: 20px;
			padding: 2rem;
			border: 2px solid white;
			box-shadow: 8px 8px 16px #d1d1d1, -8px -8px 16px #ffffff;
		}

		/* Grid vertical */
		.book-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
			gap: 2rem;
			padding: 1rem;
		}

		/* Libro vertical */
		.book-container {
			position: relative;
			perspective: 1200px;
			min-height: 380px;
            cursor: default; /* Indicate interactivity */
		}

		.book-card {
			background: white;
			border-radius: 5px 8px 8px 5px;
			transform-style: preserve-3d;
			transition: all var(--unified-transition-duration) var(--unified-transition-timing);
			position: relative;
			height: auto;
			overflow: hidden;
			box-shadow: 0 10px 30px -5px rgba(0,0,0,0.2);
		}

		/* Portada vertical */
		.book-cover {
			width: 100%;
			height: auto;
			aspect-ratio: 3/5;
			/*object-fit: cover; eliminar si es que la imagen esta con un zoom */
			object-position: center top;
			border-radius: 3px 6px 6px 3px;
			transition: all var(--unified-transition-duration) var(--unified-transition-timing);
		}

		/* Efecto de páginas del lado derecho */
		.book-card::after {
			content: '';
			position: absolute;
			top: 0;
			right: -5px;
			width: 15px;
			height: 100%;
			background: linear-gradient(to left,
				rgba(255,255,255,0.9) 0%,
				rgba(245,245,245,0.9) 20%,
				rgba(230,230,230,0.9) 100%
			);
			transform: rotateY(-40deg) translateZ(10px);
			transition: all var(--unified-transition-duration) var(--unified-transition-timing);
			opacity: 0;
		}

		/* Burbujas pequeñas */
		.book-info-bubble {
			position: absolute;
			background: var(--primary-color);
			color: white;
			padding: 0.6rem;
			border-radius: 12px;
			box-shadow: 3px 3px 10px rgba(0,0,0,0.2);
			opacity: 0;
			transition-property: opacity, transform;
            transition-duration: var(--unified-transition-duration);
            transition-timing-function: var(--unified-transition-timing);
			width: 100px;
			text-align: center;
			z-index: 2;
			font-size: 0.8rem;
            transform: translateY(10px) scale(0.9); /* Initial hidden state for desktop */
		}

		.volume-number {
			top: 10px;
			left: -15px;
		}

		.chapter-count {
			bottom: 10px;
			right: 100px;
			background: var(--secondary-color);
		}

		/* Efecto hover mejorado (Desktop) */
		.book-container:hover .book-card,
        .book-container.active-mobile .book-card { /* Apply for mobile active state (tilt) */
			transform:
				rotateY(-25deg)
				translateZ(15px)
				translateX(10px);
		}

		.book-container:hover .book-card::after,
        .book-container.active-mobile .book-card::after { /* Page effect on tilt */
			opacity: 1;
			right: -8px;
		}
        
        .book-container:hover .book-info-bubble { /* Desktop hover - bubbles pop into place */
			opacity: 1;
            transform: translateY(0) scale(1); 
		}
        /* Mobile .active-mobile for bubbles is handled by default mobile styles now */


		.book-container:hover .book-cover,
        .book-container.active-mobile .book-cover { /* Cover scale on tilt */
			transform: scale(1.05) translateX(5px);
			filter: brightness(1.05);
		}

		/* Contenido burbujas */
		.info-title {
			font-size: 0.6rem;
			margin: 0 0 0.2rem 0;
			opacity: 0.9;
			letter-spacing: 0.5px;
		}

		.info-content {
			font-size: 0.9rem;
			font-weight: bold;
			margin: 0;
		}

		/* Botón de lectura flotante */
		.read-button {
			position: absolute;
			bottom: 20px;
			left: 77%; 
			transform: translateX(-50%) translateY(10px) scale(0.9); /* Initial hidden state for desktop */
			background: rgba(255,255,255,0.9);
			color: var(--primary-color);
			padding: 0.5rem 1.2rem;
			border-radius: 20px;
			border: none;
			cursor: pointer;
			opacity: 0;
			transition: all var(--unified-transition-duration) var(--unified-transition-timing);
			backdrop-filter: blur(5px);
			box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 3; 
		}

		.book-container:hover .read-button { /* Desktop hover - read button appears */
			opacity: 1;
            transform: translateX(-50%) translateY(0) scale(1); /* Pop into place */
            box-shadow: 0 4px 8px rgba(0,0,0,0.25);
		}
        .book-container.active-mobile .read-button { /* Mobile active - subtle shadow change if needed */
             box-shadow: 0 4px 8px rgba(0,0,0,0.25);
        }

		/* Contenedor principal de episodios */
		.episodes-main-container {
			background: var(--glass-bg);
			backdrop-filter: blur(10px);
			border-radius: 20px;
			padding: 2rem;
			border: 2px solid white;
			box-shadow: 8px 8px 16px #d1d1d1, -8px -8px 16px #ffffff;
		}

		/* Subtítulos de sección */
		.section-title {
			color: var(--primary-color);
			font-size: 1.1rem;
			margin: 0 0 1rem 0;
			padding-left: 1rem;
			border-left: 4px solid var(--primary-color);
			display: flex;
			align-items: center;
			gap: 0.8rem;
		}

		.section-icon {
			font-size: 1.3rem;
		}

		/* Contenedor de cada categoría */
		.category-container {
			background: rgba(255, 255, 255, 0.1);
			border-radius: 15px;
			padding: 2rem;
			margin-bottom: 1.5rem;
			box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.1);
		}

		/* Grid de episodios mejorado */
		.episodes-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
			gap: 1.5rem;
		}

		/* Nuevo diseño de cards con imágenes */
		.episode-card {
            position: relative;
            aspect-ratio: 16/9;
			background-size: cover;
			background-position: center;
			border-radius: 8px; 
			overflow: hidden; 
			cursor: pointer;
            display: flex; 
            flex-direction: column;
            justify-content: flex-end; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition-property: transform, box-shadow;
            transition-duration: var(--unified-transition-duration);
            transition-timing-function: var(--unified-transition-timing);
            will-change: transform, box-shadow;
		}

		.episode-card::before { 
			content: '';
			position: absolute;
			top: 0; left: 0; right: 0; bottom: 0;
			background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.4) 40%, transparent 80%);
			z-index: 1;
            opacity: 1;
            transition-property: opacity;
            transition-duration: var(--unified-transition-duration);
            transition-timing-function: var(--unified-transition-timing);
            will-change: opacity;
		}
        
        .episode-card:hover {
			transform: scale(1.04) translateY(-4px);
			box-shadow: 0 12px 28px rgba(0,0,0,0.3);
		}

        .episode-card:hover::before {
             opacity: 0.85; 
        }


		.episode-content { 
			position: relative; 
			z-index: 2;
			padding: 0.75rem 1rem; 
			color: white;
		}
        
        .episode-number-display { 
            display: block;
            font-size: 0.85rem;
            font-weight: 700;
            color: rgba(255,255,255,0.9);
            margin-bottom: 0.25rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
        }

		.episode-title { 
			font-size: 1.1rem;
            font-weight: 700;
			color: white;
			margin: 0;
            line-height: 1.3;
			display: -webkit-box;
			-webkit-line-clamp: 2; 
			-webkit-box-orient: vertical;
			overflow: hidden;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
		}


		.episode-play { 
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%) scale(0.8);
			width: 50px;
			height: 50px;
			border-radius: 50%;
			background: var(--glass-bg); 
            backdrop-filter: blur(10px);
			color: white;
			border: 1px solid var(--glass-border); 
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
            font-size: 1.6rem; 
			opacity: 0;
			z-index: 3; 
            box-shadow: 0 3px 8px rgba(0,0,0,0.25);
            transition-property: opacity, transform, background-color, box-shadow, border-color;
            transition-duration: var(--unified-transition-duration);
            transition-timing-function: var(--unified-transition-timing);
            will-change: opacity, transform, background-color, box-shadow, border-color;
		}

		.episode-card:hover .episode-play {
			opacity: 1;
			transform: translate(-50%, -50%) scale(1);
            background: var(--primary-color); 
            border-color: transparent;
            box-shadow: 0 2px 10px var(--primary-color);
		}


		/* === Contenido no disponible === */
		.content-unavailable {
			position: relative;
			opacity: 0.6;
			filter: grayscale(0.7); 
		}
        .content-unavailable .episode-play {
            display: none; 
        }

		.content-unavailable::after {
			content: "No disponible en este idioma";
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			background: rgba(0,0,0,0.85);
			color: white;
			padding: 0.5em 1em;
			border-radius: 8px;
			font-size: 0.8rem;
            font-family: 'Roboto', sans-serif;
			text-align: center;
			width: auto; 
            min-width: 150px;
			z-index: 4; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            pointer-events: none; 
		}

		/* === VIDEO PLAYER STYLES === */
		.hidden { display: none !important; }
		.video-modal {
			position: fixed;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			width: 90%;
			max-width: 1000px;
			height: 70vh;
			z-index: 9999;
			border-radius: 20px;
			overflow: hidden;
			display: none;
			background: var(--glass-bg) !important;
			backdrop-filter: blur(16px) !important;
			-webkit-backdrop-filter: blur(16px) !important;
			border: 1px solid var(--glass-border) !important;
			box-shadow: var(--glass-shadow) !important;
		}
        .video-modal:fullscreen, 
        .video-modal.modal-is-actually-fullscreen { 
            width: 100% !important;
            height: 100% !important;
            max-width: none !important;
            max-height: none !important;
            border-radius: 0 !important;
            background: #000 !important; 
            backdrop-filter: none !important;
            -webkit-backdrop-filter: none !important;
            border: none !important;
            box-shadow: none !important;
        }


		.video-container {
			width: 100%;
			height: 100%;
			background: transparent;
			position: relative;
			cursor: auto;
		}

		.video-container.cursor-hidden {
			cursor: none;
		}

		.video-player {
			width: 100%;
			height: 100%;
			object-fit: contain;
		}

		.controls-container {
			position: absolute;
			bottom: 0;
			left: 0;
			right: 0;
			padding: 15px 20px;
			-webkit-backdrop-filter: blur(10px);
			background: rgb(0 0 0 / 15%); 
			border-top: 1px solid var(--glass-border); 
			backdrop-filter: blur(10px); 
            opacity: 0;
            transform: translateY(20px);
            visibility: hidden;
            pointer-events: none;
            transition: 
                opacity 0.25s cubic-bezier(0.4, 0, 0.2, 1),
                transform 0.25s cubic-bezier(0.4, 0, 0.2, 1),
                visibility 0s linear 0.25s; /* Delay visibility change on hide */
		}
        .video-modal:fullscreen .controls-container,
        .video-modal.modal-is-actually-fullscreen .controls-container { 
            background: rgba(0, 0, 0, 0.5) !important; 
        }


        .video-modal.controls-visible .controls-container {
            opacity: 1; 
            transform: translateY(0); 
            visibility: visible; 
            pointer-events: auto;
            transition-delay: 0s; /* Ensure visibility transition is immediate on show */
        }

		.progress-container {
		    position: relative;
			height: 4px;
			background: rgba(255,255,255,0.2);
			margin-bottom: 12px;
			cursor: pointer;
			border-radius: 2px;
		}
        .progress-container:focus-visible {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

		.buffer-bar {
			position: absolute;
			height: 100%;
			background: rgba(255, 255, 255, 0.4);
			top: 0;
			left: 0;
			width: 0;
			pointer-events: none;
            border-radius: 2px;
		}

		.progress-bar {
			position: relative;
			height: 100%;
			background: var(--primary-color);
			width: 0;
			z-index: 2;
			transition: width 0.1s linear;
			border-radius: 2px;
		}

		.buttons-container {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 15px;
		}

		.left-controls, .right-controls {
			display: flex;
			align-items: center;
			gap: 15px;
		}

		.play-pause, .cc-button, .fullscreen {
			color: white;
			width: 40px;
			height: 40px;
			display: flex;
			cursor: pointer;
			border-radius: 8px;
			align-items: center;
			justify-content: center;
			backdrop-filter: blur(5px);
			background: rgba(255,255,255,0.05);
			border: 1px solid var(--glass-border);
			transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
            -webkit-tap-highlight-color: transparent;
		}
        .play-pause:focus-visible, .cc-button:focus-visible, .fullscreen:focus-visible {
            outline: 2px solid var(--primary-color);
            outline-offset: 1px;
        }

		.play-pause:hover, .cc-button:hover, .fullscreen:hover {
			transform: scale(1.05);
			box-shadow: 0 0 10px var(--primary-color);
			background: var(--primary-color);
		}
        .cc-button.active {
            background: var(--primary-color);
            box-shadow: 0 0 10px var(--primary-color);
        }


		.time-display {
			color: white;
			font-family: 'Roboto', sans-serif;
			font-size: 0.9em;
			text-shadow: 0 1px 3px rgba(0,0,0,0.5);
            user-select: none;
		}

		.volume-control {
			height: 4px;
			background: rgba(255,255,255,0.1);
			-webkit-appearance: none;
			appearance: none;
			border-radius: 2px;
			width: 100px;
            cursor: pointer;
		}
        .volume-control:focus-visible {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

		.volume-control::-webkit-slider-thumb {
			-webkit-appearance: none;
			appearance: none;
			width: 14px;
			height: 14px;
			background: var(--primary-color);
			border-radius: 50%;
			border: 2px solid white;
			box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            cursor: pointer;
		}
        .volume-control::-moz-range-thumb {
            width: 14px;
            height: 14px;
            background: var(--primary-color);
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            cursor: pointer;
        }


		.close-modal {
			position: absolute;
			top: 15px;
			right: 15px;
			background: var(--primary-color);
			color: white;
			border: none;
			border-radius: 50%;
			width: 32px;
			height: 32px;
			cursor: pointer;
			z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            line-height: 1;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: 
                opacity 0.25s cubic-bezier(0.4, 0, 0.2, 1),
                visibility 0s linear 0.25s,
                transform 0.2s ease;
            -webkit-tap-highlight-color: transparent;
		}
        .video-modal.controls-visible .close-modal {
            opacity: 1; 
            visibility: visible; 
            pointer-events: auto;
            transition-delay: 0s; /* Ensure visibility transition is immediate on show */
        }


		.close-modal:hover {
			transform: scale(1.1);
		}

		.loading {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			color: white;
			display: none;
			background: rgba(0,0,0,0.7);
			padding: 12px 24px;
			border-radius: 8px;
			backdrop-filter: blur(10px);
            z-index: 10;
            user-select: none;
		}

		.center-play {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			width: 60px;
			height: 60px;
			border-radius: 50%;
			backdrop-filter: blur(10px);
			cursor: pointer;
			opacity: 0;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			justify-content: center;
			background: var(--glass-bg) !important;
			border: 2px solid var(--glass-border) !important;
            z-index: 5;
            -webkit-tap-highlight-color: transparent;
		}

		.center-play.visible {
			opacity: 1;
		}

		.center-play::after {
			content: '▶';
			color: white;
			font-size: 30px;
			margin-left: 3px;
		}

		.center-play.playing::after {
			content: '⏸';
			margin-left: 0;
		}

		/* === MANGA PLAYER STYLES (Enhanced) === */
		.manga-modal { display: none; } /* Default hidden */
		.manga-modal.flex { display: flex !important; } /* Use !important */

		.manga-modal {
		  position: fixed;
		  inset: 0;
		  background: rgba(0, 0, 0, 0.9); /* Slightly darker for full screen */
		  align-items: center;
		  justify-content: center;
		  z-index: 1000;
          touch-action: none;
		}

        /* Styles for the main content box of the manga modal (bg-gray-900) */
		.manga-modal > .bg-gray-900 {
          background: #1a1a1a;
          width: 100%;
          height: 100%;
          padding: 0; /* No padding on the modal box itself for full screen */
          border-radius: 0; /* No rounded corners for full screen */
          box-shadow: none; /* No shadow for full screen */
		  display: flex;
		  flex-direction: column;
          overflow: hidden; /* Important to contain children */
          position: relative; /* For absolute positioning of zoom controls */
		}

		.close-manga {
		  border: none;
		  font-size: 1.5rem;
		  cursor: pointer;
		  position: absolute;
          top: calc(env(safe-area-inset-top, 0px) + 10px);
          right: calc(env(safe-area-inset-right, 0px) + 10px);
		  background: var(--primary-color);
		  color: white;
		  padding: 8px 12px;
		  border-radius: 20px;
		  cursor: pointer;
          line-height: 1;
          z-index: 1002; /* Higher than other controls */
          -webkit-tap-highlight-color: transparent;
		}

        .manga-controls-header, .manga-nav-footer {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            opacity: 1;
            transform: translateY(0);
            z-index: 1001;
            pointer-events: auto;
        }
        .manga-modal.controls-hidden .manga-controls-header {
            opacity: 0;
            transform: translateY(-100%);
            pointer-events: none;
        }
        .manga-modal.controls-hidden .manga-nav-footer {
            opacity: 0;
            transform: translateY(100%);
            pointer-events: none;
        }
        
        .manga-modal.controls-hidden .manga-zoom-controls { 
            opacity: 0;
            pointer-events: none;
        }


		.manga-controls-header {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            align-items: center;
            flex-wrap: wrap;
            background: rgba(26, 26, 26, 0.85); /* Slightly more opaque */
            border-radius: 0.375rem;
            padding-top: calc(env(safe-area-inset-top, 0px) + 0.5rem);
            padding-right: calc(env(safe-area-inset-right, 0px) + 0.75rem);
            padding-bottom: 0.5rem;
            padding-left: calc(env(safe-area-inset-left, 0px) + 0.75rem);
        }
		.manga-modal .mode-btn {
		  background: #2d2d2d;
		  color: #fff;
		  border: none;
		  padding: 0.5rem 1rem;
		  border-radius: 0.375rem;
		  cursor: pointer;
          font-family: 'Roboto', sans-serif;
          -webkit-tap-highlight-color: transparent;
		}
        .manga-modal .mode-btn.active {
            background: var(--primary-color);
        }
		.manga-modal .page-counter {
		  margin-left: auto;
          margin-right: 60px; /* Space for close button */
		  color: #ccc;
		  line-height: 1.5rem;
          font-family: 'Roboto', sans-serif;
          user-select: none;
		}

		.manga-pages-outer-container {
            flex: 1;
            overflow: hidden;
            position: relative;
            cursor: auto;
        }
        .manga-pages-outer-container.grabbing {
            cursor: grabbing;
        }
		.manga-pages {
		  width: 100%;
          height: 100%;
		  transition: transform 0.1s ease-out; /* For zoom/pan */
		  overscroll-behavior: contain;
          overflow: hidden;
		}
		.manga-pages.vertical {
		  display: flex;
		  flex-direction: column;
		  overflow-y: auto;
		  scroll-behavior: smooth;
          align-items: center;
          will-change: scroll-position;
		}
		.manga-pages.horizontal {
		  display: flex;
		  overflow-x: auto;
		  scroll-snap-type: x mandatory;
		  scroll-behavior: smooth;
		  -ms-overflow-style: none;
		  scrollbar-width: none;
          align-items: center;
          will-change: scroll-position;
          direction: rtl; /* Spreads flow RTL */
		  position: absolute;
		  top: 50%;
		  left: 50%;
		  transform: translate(-50%, -50%);
		  max-width: 64%;
		}
		.manga-pages.horizontal::-webkit-scrollbar {
		  display: none;
		}

        .page-spread {
            display: flex;
            width: 100%;
            height: 100%;
            flex-shrink: 0;
            scroll-snap-align: start; /* For horizontal mode with spreads */
            direction: ltr; /* Slots within spread are LTR for DOM order, visual order affected by parent RTL */
            overflow: hidden; /* Clip zoomed content within spread */
            transform-origin: center center; /* For zoom */
            transition: transform 0.1s ease-out; /* For zoom/pan on spread */
        }

        .page-slot {
            flex: 0 0 50%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* Clip image within slot if necessary */
            position: relative; /* For loading indicator */
        }
        .manga-pages.horizontal .page-slot {
            padding: 0;
            margin: 0;
            align-items: center; /* Alinea en la parte superior */
            min-height: 100%; /* Ocupar altura completa */
        }

        .manga-pages.horizontal .page-spread {
            height: 100%;
            align-items: stretch; /* Estirar slots verticalmente */
        }

		.page-item { /* Now used inside page-slot or directly in vertical mode */
		  display: flex;
		  justify-content: center;
		  align-items: center;
		  flex-shrink: 0;
          width: 100%;
          height: auto;
          position: relative; /* For loading indicator */
          overflow: hidden;
		}
		.vertical .page-item { /* Direct child in vertical mode */
          /* padding-bottom: 0; This is handled by mobile specific styles now */
		}


		.manga-pages img { /* Applies to images in both modes */
		  max-width: 100%;
		  max-height: 100%;
		  object-fit: contain;
          user-select: none;
          -webkit-user-drag: none;
          pointer-events: none; /* Critical for touch events on parent */
          transform-origin: center center; /* For zoom on image (vertical mode) */
          transition: transform 0.1s ease-out; /* For zoom/pan on image (vertical mode) */
		}
        /* Default styling for images (e.g., in vertical mode) */
        .manga-pages.vertical .page-item img {
             border-radius: 0rem;
             box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        /* Style for closer images in horizontal desktop spreads */
        .manga-pages.horizontal .page-slot .page-item img {
            border-radius: 0;
            box-shadow: none;
            max-width: 71%;
            position: fixed;
        }


        .page-item .loading-spinner, .page-slot .loading-spinner {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            z-index: 1;
            top: calc(50% - 20px);
            left: calc(50% - 20px);
            transform: none;
        }
        .page-item .loading-text, .page-slot .loading-text {
            position: absolute;
            top: calc(50% + 30px);
            left: 50%;
            transform: translateX(-50%);
            color: #ccc;
            font-size: 0.8rem;
        }
        .page-item.loaded .loading-spinner, .page-slot.loaded .loading-spinner,
        .page-item.loaded .loading-text, .page-slot.loaded .loading-text,
        .page-item.error .loading-spinner, .page-slot.error .loading-spinner {
            display: none;
        }
        .page-item.error .loading-text, .page-slot.error .loading-text {
            display: block; /* Ensure error text is visible */
        }

        .manga-nav-footer {
            margin-top: 1rem;
            display: flex;
            justify-content: center;
            gap: 1rem;
            background: rgba(26, 26, 26, 0.85); /* Slightly more opaque */
            border-radius: 0.375rem;
            padding-top: 0.5rem;
            padding-right: calc(env(safe-area-inset-right, 0px) + 0.75rem);
            padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 0.5rem);
            padding-left: calc(env(safe-area-inset-left, 0px) + 0.75rem);
        }
		.manga-modal .manga-nav-footer button {
		  background: #2d2d2d;
		  color: #fff;
		  border: none;
		  padding: 0.5rem 1rem;
		  border-radius: 0.375rem;
		  cursor: pointer;
          font-family: 'Roboto', sans-serif;
          -webkit-tap-highlight-color: transparent;
		}
        .manga-modal .manga-nav-footer button:disabled {
            background: #1a1a1a;
            color: #555;
            cursor: not-allowed;
        }

		.no-scroll {
		  overflow: hidden !important;
		}

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .comments-section {
        max-width: 1200px;
        margin: 3rem auto;
        padding: 1.5rem;
        background: var(--glass-bg);
        border: 1px solid var(--glass-border);
        box-shadow: var(--glass-shadow);
        border-radius: 16px;
        font-family: 'Comic Neue', cursive;
        }

        .comments-section h3 {
        color: #fff;
        text-align: center;
        margin-bottom: 1rem;
        font-size: 1.5rem;
        letter-spacing: 0.5px;
        position: relative;
        }

        .comments-section h3::after {
        content: '';
        position: absolute;
        bottom: -8px;
        left: 50%;
        transform: translateX(-50%);
        width: 60%;
        height: 3px;
        background: linear-gradient(to right, transparent, var(--primary-color), transparent);
        }

        .comments-toggle-container {
        text-align: center;
        margin: 3rem auto;
        }

        .btn-comments {
        background: var(--primary-color);
        color: white;
        padding: 0.8rem 2rem;
        font-size: 1rem;
        border: none;
        border-radius: 30px;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
        font-family: 'Comic Neue', cursive;
        transition: all 0.3s ease;
        }

        .btn-comments:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(255, 107, 107, 0.4);
        }

		/* === Support Hub === */
        .support-hub-container {
            max-width: 1000px;
            margin: 4rem auto;
            padding: 2rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            font-family: 'Comic Neue', cursive;
            backdrop-filter: blur(10px);
            box-shadow: 8px 8px 16px #d1d1d1, -8px -8px 16px #ffffff;
        }

        .support-hub-header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .support-hub-header h2 {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .support-hub-header p {
            color: #2d3436;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .support-tabs {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 30px;
            padding: 0.5rem;
            max-width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        .support-tab {
            padding: 0.8rem 1.5rem;
            border: none;
            background: transparent;
            border-radius: 25px;
            font-family: 'Comic Neue', cursive;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.7rem;
            color: #555;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .support-tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.7);
            color: #111;
        }

        .support-tab.active {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 4px 10px rgba(255, 107, 107, 0.4);
        }
        
        .support-tab i {
            font-size: 1.1rem;
        }

        .support-panel {
            padding: 1.5rem;
            background: rgba(255, 255, 255, 50%);
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.8);
        }

        .panel-description {
            font-size: 1rem;
            line-height: 1.6;
            color: #2d3436;
            max-width: 700px;
            margin: 0 auto 1.5rem auto;
        }

        .panel-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .support-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.8rem 1.8rem;
            border-radius: 30px;
            text-decoration: none;
            font-family: 'Comic Neue', cursive;
            font-weight: 700;
            transition: all 0.3s ease;
            border: 2px solid white;
            min-width: 200px;
        }
        
        .support-btn i { margin-right: 10px; font-size: 1.2rem; }
        .support-btn-primary { background: #E85D5D; color: white; }
        .support-btn-secondary { background: #4ecdc4; color: white; }
        .support-btn-tertiary { background: #ffd166; color: #333; }
        .support-btn:hover { transform: translateY(-3px); box-shadow: 0 7px 14px rgba(0,0,0,0.15); }

		/* --- AD System Styles (Improved) --- */
		/* Contenedor principal para el slot del anuncio */
		.ad-slot-container {
			display: flex;
			justify-content: center;
			align-items: center;
			min-height: 250px; /* Altura del anuncio de Adsterra */
			width: 100%;
		}

		/* Estilo base del contenedor del anuncio */
		.asd-container {
			width: 100%;
			background: var(--glass-bg);
			border: 1px solid var(--glass-border);
			border-radius: 16px;
			padding: 1.5rem;
			position: relative;
			display: flex;
			gap: 1.5rem;
			align-items: center;
			box-sizing: border-box;
			text-decoration: none;
			color: inherit;
			font-family: 'Comic Neue', cursive;
			transition: box-shadow 0.3s ease, transform 0.3s ease;
		}

		/* Placeholder mientras el anuncio dinámico carga */
		.asd-container.loading-ad {
			flex-direction: column;
			justify-content: center;
			text-align: center;
			color: #2d3436;
			font-size: 1.1rem;
		}
		.asd-container.loading-ad .ad-spinner {
			width: 32px;
			height: 32px;
			border: 4px solid rgba(0,0,0,0.1);
			border-top-color: var(--primary-color);
			border-radius: 50%;
			animation: spin 1s linear infinite;
			margin-top: 1rem;
		}

		/* Nuevos estilos para el Banner de Respaldo (Fallback) */
		.asd-container.fallback-ad {
			max-width: 300px;
			width: 100%;
			aspect-ratio: auto 300 / 250;
			padding: 0;
			border-radius: 16px;
			overflow: hidden;
			display: block; /* Sobrescribe flex */
			position: relative;
			cursor: pointer;
			transform: scale(1);
			box-shadow: 0 4px 15px rgba(0,0,0,0.2);
			transition: transform 0.3s ease, box-shadow 0.3s ease;
		}
		.asd-container.fallback-ad:hover {
			transform: scale(1.03) translateY(-2px);
			box-shadow: 0 8px 25px rgba(0,0,0,0.25);
		}
		.asd-container.fallback-ad a {
			display: block;
			width: 100%;
			height: 100%;
			text-decoration: none;
			color: white;
		}

		/* Imagen del anuncio de respaldo */
		.asd-container.fallback-ad .asd-image {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			object-fit: cover;
			border-radius: 0;
			border: none;
			box-shadow: none;
			transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
		}
		.asd-container.fallback-ad:hover .asd-image {
			transform: scale(1.1);
		}

		/* Contenido superpuesto del anuncio de respaldo */
		.asd-container.fallback-ad .asd-content {
			position: absolute;
			bottom: 0;
			left: 0;
			right: 0;
			padding: 1.5rem 1rem 1rem;
			background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 40%, transparent 100%);
			z-index: 2;
			text-align: left;
			color: white;
			font-family: 'Roboto', sans-serif;
			flex-grow: 0; /* Override from general .asd-container */
		}
		.asd-container.fallback-ad .asd-title {
			color: white;
			font-size: 1.1rem;
			font-family: 'Comic Neue', cursive;
			font-weight: 700;
			text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
			margin: 0 0 0.25rem 0;
		}
		.asd-container.fallback-ad .asd-description {
			color: rgba(255, 255, 255, 0.9);
			font-size: 0.8rem;
			line-height: 1.4;
			margin: 0 0 0.75rem 0;
			font-family: 'Roboto', sans-serif;
		}
		.asd-container.fallback-ad .asd-cta {
			display: inline-block;
			background: var(--primary-color);
			color: white;
			padding: 0.4rem 1rem;
			border-radius: 20px;
			font-weight: 700;
			font-size: 0.85rem;
			transition: background-color 0.3s ease;
			box-shadow: none;
			font-family: 'Comic Neue', cursive;
		}
		.asd-container.fallback-ad:hover .asd-cta {
			background-color: #ff8a8a;
		}

		/* Badge de "Publicidad" */
		.asd-badge {
			position: absolute;
			top: 10px;
			right: 10px;
			background: var(--primary-color);
			color: white;
			padding: 0.3rem 0.8rem;
			border-radius: 15px;
			font-size: 0.7rem;
			font-family: 'Roboto', sans-serif;
			z-index: 3;
		}

		/* Mejoras responsive */
		@media (max-width: 1024px) {
			.anime-container {
				grid-template-columns: 1fr;
				margin: 20px;
			}
			.anime-cover { max-width: 350px; margin: 0 auto; }
			.anime-info { padding: 1.5rem; }
            .manga-library, .episodes-main-container { padding: 1.5rem; }
		}

		@media (max-width: 768px) {
            body { padding-top: 80px; }
			.detail-nav {
				position: sticky; top: 0; left: 0; right: 0;
				border-radius: 0; padding: 0.6rem 1rem;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
			}
			.site-title-detail { font-size: 1.3rem; }
			.back-button { padding: 0.5rem 1rem; font-size: 0.85rem; }
	        .anime-container { margin-top: 20px; }
			.anime-description { font-size: 0.9rem; padding: 1rem; }
            .detail-boxes { grid-template-columns: 1fr 1fr; }
			.detail-item { flex: 1 1 100px; padding: 0.7rem 0.9rem; }
			.detail-label { font-size: 0.7rem; }
			.detail-value { font-size: 0.9rem; }
			.format-selector { flex-direction: column; width: 85%; gap: 0.8rem; }
			.format-button { justify-content: center; width: 100%; padding: 0.8rem 1rem; }
			
            .episodes-grid { 
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); 
                gap: 1rem; 
            }
            .episode-card .episode-content { padding: 0.5rem 0.75rem; }
            .episode-number-display { font-size: 0.75rem; margin-bottom: 0.15rem; }
			.episode-title { font-size: 0.9rem; -webkit-line-clamp: 2; line-height: 1.2; }
			.episode-play { width: 40px; height: 40px; font-size: 1.2rem; }

            /* Single Line Horizontal Scroll for Book Grid */
            .book-grid {
                display: grid;
                grid-auto-flow: column;
                grid-auto-columns: 130px; /* Width of each book item */
                overflow-x: auto;
                overflow-y: hidden;
                gap: 1rem;
                padding: 2rem; /* Padding for the scrollable area */
                -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
                scrollbar-width: thin; /* For Firefox */
                scrollbar-color: var(--primary-color) rgba(0,0,0,0.1); /* For Firefox */
            }
            .book-grid::-webkit-scrollbar {
                height: 8px;
            }
            .book-grid::-webkit-scrollbar-thumb {
                background-color: var(--primary-color);
                border-radius: 4px;
            }
            .book-grid::-webkit-scrollbar-track {
                background-color: rgba(0,0,0,0.1);
                 border-radius: 4px;
            }
            .manga-library { /* Adjust parent padding if book-grid has its own */
                padding: 1.5rem 0; 
            }


            .book-container { min-height: 300px; } /* Keep overall container size */
			.book-cover { aspect-ratio: 2/3; }

            /* Mobile Book Card Adjustments - Always Visible Bubbles & Read Button */
            .book-info-bubble { /* General for mobile */
                opacity: 1; /* Visible by default */
                padding: 0.4rem 0.6rem;
                font-size: 0.75rem;
                width: 100px;
                min-width: 70px;
            }
            .volume-number { 
                top: 8px; left: -15px; right: auto;
                opacity: 1; 
                transform: scale(0.85); 
            }
            .chapter-count { 
                bottom: 8px; left: -15px; top: auto; right: auto;
                opacity: 1; 
                transform: scale(0.85); 
            }
            .read-button { 
                opacity: 1; 
                bottom: 20px;
                left: 80%; 
                padding: 0.4rem 1rem;
                transform: translateX(-50%) scale(0.9); 
                 box-shadow: 0 2px 5px rgba(0,0,0,0.2); 
            }
            .book-container.active-mobile .read-button {
                 box-shadow: 0 4px 8px rgba(0,0,0,0.25); 
            }


			.video-player { touch-action: manipulation; will-change: transform; transform: translateZ(0); }
			.video-container { backdrop-filter: none !important; }
            .video-modal { width: 100%; height: auto; max-height: 60vh; top: 50%; left: 50%; transform: translate(-50%, -50%); border-radius: 0; }
             .video-modal:fullscreen, 
             .video-modal.modal-is-actually-fullscreen { 
                max-height: none !important; 
             }
            .controls-container { padding: 10px 15px; }
            .buttons-container, .left-controls, .right-controls { gap: 10px; }
            .play-pause, .cc-button, .fullscreen { width: 35px; height: 35px; }
            .time-display { font-size: 0.8em; }
            .volume-control { width: 70px; }
            .center-play { width: 50px; height: 50px; }
            .center-play::after { font-size: 24px; }

            /* Manga Player Mobile Styles */
            .manga-modal > .bg-gray-900 { }
            .manga-controls-header {
                padding-top: calc(env(safe-area-inset-top, 0px) + 0.3rem);
                padding-right: calc(env(safe-area-inset-right, 0px) + 0.5rem);
                padding-bottom: 0.3rem;
                padding-left: calc(env(safe-area-inset-left, 0px) + 0.5rem);
                gap: 0.3rem; margin-bottom: 0.5rem;
            }
            .manga-nav-footer {
                padding-top: 0.3rem;
                padding-right: calc(env(safe-area-inset-right, 0px) + 0.5rem);
                padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 0.3rem);
                padding-left: calc(env(safe-area-inset-left, 0px) + 0.5rem);
                gap: 0.3rem; margin-top: 0.5rem; margin-bottom: 0;
            }
            .manga-modal .mode-btn, .manga-modal .manga-nav-footer button { padding: 0.4rem 0.8rem; font-size: 0.8rem; }
            .manga-modal .page-counter { font-size: 0.8rem; margin-right: 40px; }
            .close-manga {
                top: calc(env(safe-area-inset-top, 0px) + 8px);
                right: calc(env(safe-area-inset-right, 0px) + 8px);
                padding: 6px 10px; font-size: 1.2rem;
            }
            .manga-pages.vertical .page-item {
                padding-bottom: 0; 
            }
            .manga-pages.vertical .page-item img { 
                border-radius: 0; 
                box-shadow: none; 
            }
            .support-hub-container {
                padding: 1.5rem 1rem;
                margin: 2rem auto;
            }
            .support-hub-header h2 { font-size: 1.5rem; }
            .support-hub-header p { font-size: 0.9rem; }
            
            .support-tabs {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem;
                max-width: 100%;
            }
            .support-tab {
                justify-content: center;
                width: 100%;
            }

            .support-panel { padding: 1rem; }
            .panel-description { font-size: 0.9rem; }
            
            .panel-buttons {
                flex-direction: column;
                gap: 0.8rem;
            }
            .support-btn {
                width: 100%;
                box-sizing: border-box; /* Ensure padding doesn't break width */
            }
		}


        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

    </style>
</head>
<body>
    <!-- Navbar -->
	<nav class="detail-nav">
		<h1 class="site-title-detail">Remastersanime4k</h1>
		<div style="flex-grow: 1;"></div>
		<a href="https://remastersanime4k.github.io/" class="back-button" aria-label="Volver a la página principal">← Volver</a>
	</nav>

    <!-- Contenido principal -->
    <main class="anime-container" aria-labelledby="anime-title">
        <div class="anime-cover">
            <img src="https://i.pinimg.com/736x/3c/b9/01/3cb90141a685977b54467420c86bf2f4.jpg"
                 alt="Portada del anime">
        </div>

		<!-- Sección de información -->
        <section class="anime-info" aria-labelledby="info-title">
            <h2 id="anime-title" class="sr-only">8 Man エイトマン 1963</h2>
            <p class="anime-description">Un investigador privado, al trabajar en un caso rutinario sobre tecnología robada, resulta gravemente herido. Su única esperanza de sobrevivir es sacrificar su humanidad para convertirse en エイトマン (8Man), un poderoso ciborg justiciero potenciado con un cerebro humano vivo. Resucitado como el vigilante tecnológico definitivo, le corresponde a 8Man llevar a los criminales ante la justicia y detener el creciente ciclo de violencia.</p>
			<div class="detail-boxes" role="region" aria-label="Detalles del anime">
                <div class="detail-item">
                    <span class="detail-label">ESTADO</span>
                    <p class="detail-value">Finalizado</p>
                </div>
                <div class="detail-item">
                    <span class="detail-label">TEMPORADAS</span>
                    <p class="detail-value">1</p>
                </div>
                <div class="detail-item">
                    <span class="detail-label">EPISODIOS</span>
                    <p class="detail-value">56</p>
                </div>
                <div class="detail-item">
                    <span class="detail-label">AÑO</span>
                    <p class="detail-value">1963</p>
                </div>
                <div class="detail-item">
                    <span class="detail-label">VOLÚMENES</span>
                    <p class="detail-value">6</p>
                </div>
                <div class="detail-item">
                    <span class="detail-label">CAPÍTULOS</span>
                    <p class="detail-value">116</p>
                </div>
			</div>
		</section>

		<!-- Sección de idiomas -->
		<div class="language-selector-container" role="region" aria-label="Selector de idioma del contenido">
            <div class="format-selector">
                <button class="format-button active" data-lang="jp" aria-pressed="true">Japonés</button>
                <button class="format-button" data-lang="latino" aria-pressed="false">Español Latino</button>
            </div>
		</div>
	</main>


	<section class="full-width-section" aria-labelledby="manga-section-title">
		<div class="manga-library">
			<h3 id="manga-section-title" class="section-title">
				<span class="section-icon" aria-hidden="true">📖</span>Mangas
            </h3>
			<div class="book-grid" role="list" aria-label="Lista de volúmenes de manga">
				<!-- Volumen 1 -->
				<div class="book-container" role="listitem"
						data-srcjp='[
									["https://i.pinimg.com/736x/a3/a3/db/a3a3db64ac0f5006693cee2931076aef.jpg", ""],
									["https://i.pinimg.com/736x/b2/05/22/b205223e7ca1f5194d9cbda1168d6814.jpg", ""],
									["https://i.pinimg.com/736x/41/ae/f4/41aef43b622dfd16f2ded92c09fc247a.jpg", ""],
									["https://i.pinimg.com/736x/9d/84/1a/9d841a918967183e01446295d11b7edb.jpg", ""],
									["https://i.pinimg.com/736x/36/00/4b/36004bc83274365ead3de3dd59248008.jpg", ""],
									["https://i.pinimg.com/736x/df/f1/da/dff1da915a407ebc984bb362ac08899f.jpg", ""],
									["https://i.pinimg.com/736x/19/4b/52/194b527ccf64684a77392dfaebd4ac74.jpg", ""],
									["https://i.pinimg.com/736x/86/08/90/86089077e9fa8a948e0b1dbd64f3cf11.jpg", ""],
									["https://i.pinimg.com/736x/bf/ff/d1/bfffd1c76b53a0d680ba26dfee87eac9.jpg", ""],
									["https://i.pinimg.com/736x/15/4e/bd/154ebd4a7dfbb5e5244250474aa0fcdd.jpg", ""],
									["https://i.pinimg.com/736x/72/5a/03/725a03f943a5216fea1a91badd052dd3.jpg", ""],
									["https://i.pinimg.com/736x/e9/f6/d6/e9f6d6c05b79cb6d795dbc28bba4e34d.jpg", ""],
									["https://i.pinimg.com/736x/91/a5/62/91a56271fe75da67104a8564fb2817fd.jpg", ""],
									["https://i.pinimg.com/736x/ad/14/1a/ad141ab79a43505ceb7d29d787c4b8b9.jpg", ""],
									["https://i.pinimg.com/736x/8f/1c/1d/8f1c1de5fd657238df45b29e079617b6.jpg", ""],
									["https://i.pinimg.com/736x/3b/b5/3d/3bb53d9b3c74fb9d9ca0cac7ab9956a7.jpg", ""],
									["https://i.pinimg.com/736x/45/aa/2d/45aa2dee4b3103ecd9e25ed8182a66d0.jpg", ""],
									["https://i.pinimg.com/736x/08/c0/11/08c011d7e8977b87cbb3524795a37afd.jpg", ""],
									["https://i.pinimg.com/736x/3e/ce/39/3ece39f21cd28255117bbb74a63b50b2.jpg", ""],
									["https://i.pinimg.com/736x/27/c0/6a/27c06af78b40fc612adba2076c294e33.jpg", ""],
									["https://i.pinimg.com/736x/f1/82/8a/f1828acafc56c057b72e5aef2c509760.jpg", ""],
									["https://i.pinimg.com/736x/d6/8f/eb/d68feb640ed13573b2c00b93b5ef5bc6.jpg", ""],
									["https://i.pinimg.com/736x/cd/13/75/cd137555e28bc0c447a0841c23cf62dc.jpg", ""],
									["https://i.pinimg.com/736x/b2/c9/a6/b2c9a6dc3b7b1281474d0e5797902a4e.jpg", ""],
									["https://i.pinimg.com/736x/1d/2d/99/1d2d999bdd82e1d5531a96d7e6db5a2b.jpg", ""],
									["https://i.pinimg.com/736x/8a/f6/35/8af635bb5de4181748333326ae0bd52a.jpg", ""],
									["https://i.pinimg.com/736x/29/51/79/295179bb85e87fbe0963351e84035587.jpg", ""],
									["https://i.pinimg.com/736x/99/2c/5c/992c5c39996977dcc1f88a89d998fa6c.jpg", ""],
									["https://i.pinimg.com/736x/dd/ef/af/ddefaf540156e334353b35bd2fb811ff.jpg", ""],
									["https://i.pinimg.com/736x/30/b0/3f/30b03ff57d55b3d3250efd38f5967d86.jpg", ""],
									["https://i.pinimg.com/736x/c0/41/93/c0419397b9b23e2e473144ffc179a99d.jpg", ""],
									["https://i.pinimg.com/736x/bb/22/75/bb22755b1155e1a058ca87ee82ca5d90.jpg", ""],
									["https://i.pinimg.com/736x/29/4e/cd/294ecd2018ab4c91ffc744889d51da3a.jpg", ""],
									["https://i.pinimg.com/736x/28/b8/a2/28b8a23d367783dba28c233fb4994bc5.jpg", ""],
									["https://i.pinimg.com/736x/49/86/a5/4986a53e12c5612b7c8c461c28a2a988.jpg", ""],
									["https://i.pinimg.com/736x/9f/5e/ad/9f5eadc00c4b2335746c16afed746e8d.jpg", ""],
									["https://i.pinimg.com/736x/f4/81/28/f48128d9ad891e18971157215b62dc37.jpg", ""],
									["https://i.pinimg.com/736x/63/6f/3a/636f3a3fc080f4e2c611e5a24b70f6d1.jpg", ""],
									["https://i.pinimg.com/736x/94/84/7d/94847dd4101b01d9ee231e30d21e51b4.jpg", ""],
									["https://i.pinimg.com/736x/3d/c1/ba/3dc1ba37ff135c991357561ba670c570.jpg", ""],
									["https://i.pinimg.com/736x/40/aa/be/40aabe60e27da52090ac216834528764.jpg", ""],
									["https://i.pinimg.com/736x/4e/89/20/4e8920e7c4ebee6eb43c182ee29acce5.jpg", ""],
									["https://i.pinimg.com/736x/d7/ad/60/d7ad604e41a35bf9e4720a6a069ee001.jpg", ""],
									["https://i.pinimg.com/736x/20/ab/17/20ab17f66388b01bd1d9dc6fc36a188c.jpg", ""],
									["https://i.pinimg.com/736x/13/17/aa/1317aa2e9dc5a63a3ce952c5c6cbcf8d.jpg", ""],
									["https://i.pinimg.com/736x/79/36/a1/7936a19c7b7bee4c6540061e7b75810b.jpg", ""],
									["https://i.pinimg.com/736x/2e/91/0e/2e910ef74436ab35f824af95bdb84a94.jpg", ""],
									["https://i.pinimg.com/736x/a4/64/ee/a464ee14f04beb7b865f7b3f305afad9.jpg", ""],
									["https://i.pinimg.com/736x/0e/c5/b0/0ec5b0f7fc4a8dbaa7f1b6a70458f51c.jpg", ""],
									["https://i.pinimg.com/736x/c6/48/7b/c6487bee9b36f02ee7b5422c1ad804d7.jpg", ""],
									["https://i.pinimg.com/736x/d7/06/d1/d706d12f8f761c7a4cdd5a4228dafbfe.jpg", ""],
									["https://i.pinimg.com/736x/79/91/67/79916760bdfffe5c7250895d7ee8d7ac.jpg", ""],
									["https://i.pinimg.com/736x/57/9c/dc/579cdc0a021bef545511edf06883bb2d.jpg", ""],
									["https://i.pinimg.com/736x/45/d8/5f/45d85fe6bef2cd211001bd0feea5270b.jpg", ""],
									["https://i.pinimg.com/736x/fc/43/a7/fc43a7f9223007371741b393b5d1394d.jpg", ""],
									["https://i.pinimg.com/736x/0a/bb/b8/0abbb8b53806cdce6f7afec9cc534c43.jpg", ""],
									["https://i.pinimg.com/736x/94/ce/a1/94cea163cd956594813f82f03845af59.jpg", ""],
									["https://i.pinimg.com/736x/87/fb/a8/87fba86b0897dfb7e46ffe368941af0e.jpg", ""],
									["https://i.pinimg.com/736x/01/2d/00/012d009b61113705ecd8adaef2d8fb78.jpg", ""],
									["https://i.pinimg.com/736x/73/57/ac/7357ace1d144981c9452a1d23943ef5f.jpg", ""],
									["https://i.pinimg.com/736x/39/4d/5f/394d5facbc441d9599c89252d7d07be1.jpg", ""],
									["https://i.pinimg.com/736x/96/82/5e/96825e8aafca51e390956ed231e33776.jpg", ""],
									["https://i.pinimg.com/736x/3d/d9/d6/3dd9d600f0869b40afe45621df3eda2e.jpg", ""],
									["https://i.pinimg.com/736x/cb/e9/81/cbe9817ed3e2303e4feaab3b027147f2.jpg", ""],
									["https://i.pinimg.com/736x/05/a6/a0/05a6a01faf174a1641337203a60576c0.jpg", ""],
									["https://i.pinimg.com/736x/35/03/63/35036324fb3b35f5d32a5742f4c9626d.jpg", ""],
									["https://i.pinimg.com/736x/29/d6/48/29d648892a3e18b99b823c17bd22c5ef.jpg", ""],
									["https://i.pinimg.com/736x/c8/53/d4/c853d41488454cbc68a716ca1468ab01.jpg", ""],
									["https://i.pinimg.com/736x/fb/1b/67/fb1b67760c86e51d003efb11bf2ddd42.jpg", ""],
									["https://i.pinimg.com/736x/9c/ba/e7/9cbae71350e09c3ef3e41309b9663c4a.jpg", ""],
									["https://i.pinimg.com/736x/cc/b9/59/ccb959e8e21509f508498d8c22d431d3.jpg", ""],
									["https://i.pinimg.com/736x/33/d6/4b/33d64bc3ab7e8349a54c5b4cc80f2c85.jpg", ""],
									["https://i.pinimg.com/736x/ba/4e/f4/ba4ef4a9255d03172fae49beb0e15e91.jpg", ""],
									["https://i.pinimg.com/736x/e5/21/31/e52131e72beb34944f0e5a2a52bace1c.jpg", ""],
									["https://i.pinimg.com/736x/d7/2f/96/d72f96eabb1c2f5d22c310cf0045a518.jpg", ""],
									["https://i.pinimg.com/736x/0c/97/f6/0c97f6b62f6b2988ed8d53843bb2f9ae.jpg", ""],
									["https://i.pinimg.com/736x/9a/fb/f1/9afbf19396f64789c22db8faf677e934.jpg", ""],
									["https://i.pinimg.com/736x/e3/d6/43/e3d6431fc3304c2f404e44ca304b7b6e.jpg", ""],
									["https://i.pinimg.com/736x/99/6e/48/996e481cbbd356593f4459c5485ad200.jpg", ""],
									["https://i.pinimg.com/736x/37/71/46/377146ae8b418a7c0f8187d5afc1a393.jpg", ""],
									["https://i.pinimg.com/736x/a6/af/af/a6afafd6d805ada42f602b547c9d778e.jpg", ""],
									["https://i.pinimg.com/736x/c9/8d/f1/c98df1aca9dbe6461d83a0a9bcc5cb37.jpg", ""],
									["https://i.pinimg.com/736x/cd/a1/f6/cda1f62adebe7e18a2e186179973a3bd.jpg", ""],
									["https://i.pinimg.com/736x/59/c2/41/59c241e29e47a43c08e039e0880f0cc2.jpg", ""],
									["https://i.pinimg.com/736x/4b/bf/f4/4bbff4e965b44864f181b69222c39e18.jpg", ""],
									["https://i.pinimg.com/736x/d8/61/b3/d861b3a9ffe9c8a028c570b0d440cbd5.jpg", ""],
									["https://i.pinimg.com/736x/50/c1/7c/50c17c7a0cbf83368c6261247d6bbcfe.jpg", ""],
									["https://i.pinimg.com/736x/0a/cf/2a/0acf2a9b7e19b0403df6b7747ce4f6a4.jpg", ""],
									["https://i.pinimg.com/736x/d5/15/e9/d515e9576c02f1d0ce3934fab1c7acbb.jpg", ""],
									["https://i.pinimg.com/736x/fd/7c/77/fd7c77811c019f9cebd999a39f908b10.jpg", ""],
									["https://i.pinimg.com/736x/98/73/2a/98732a7da0a8fcffda194006e6eaa597.jpg", ""],
									["https://i.pinimg.com/736x/61/da/f2/61daf26851c5667c27d764b24854f24e.jpg", ""],
									["https://i.pinimg.com/736x/2e/22/78/2e22789c84d4303345920ccad883915c.jpg", ""],
									["https://i.pinimg.com/736x/f1/12/ad/f112add018a4962afc1b1b158a84f398.jpg", ""],
									["https://i.pinimg.com/736x/ed/cf/cb/edcfcb02645312802ca6ce5fcda61ac9.jpg", ""],
									["https://i.pinimg.com/736x/48/89/f2/4889f2fddf380116efa8a967b4a56795.jpg", ""],
									["https://i.pinimg.com/736x/53/77/e4/5377e4d517e02d0c89ad07a628d801ee.jpg", ""],
									["https://i.pinimg.com/736x/9a/5d/38/9a5d38c59520804291b9c1e812f340ce.jpg", ""],
									["https://i.pinimg.com/736x/d4/29/bd/d429bd4ef7d83d66f8cff07f02e4481e.jpg", ""],
									["https://i.pinimg.com/736x/0f/d2/bb/0fd2bb6d8efb1122452a6737d3ed3667.jpg", ""],
									["https://i.pinimg.com/736x/66/ff/f6/66fff649a8a898944f1a01c9c3f6c6d9.jpg", ""],
									["https://i.pinimg.com/736x/b6/c4/66/b6c466032f7675d504f98bb7e81d4810.jpg", ""],
									["https://i.pinimg.com/736x/d1/bb/d2/d1bbd245f8951f1e1068e2fd3cdabb80.jpg", ""],
									["https://i.pinimg.com/736x/96/ed/9e/96ed9e89cd2b6ea2080c21f428c53f6c.jpg", ""],
									["https://i.pinimg.com/736x/6d/27/0c/6d270cbeb6586255ab402a1769ee3fd6.jpg", ""],
									["https://i.pinimg.com/736x/9c/e2/34/9ce23481eb4bfb553e4d4caf722e5c7d.jpg", ""],
									["https://i.pinimg.com/736x/b7/3e/e6/b73ee668f2d32379d9e323c9de66841b.jpg", ""],
									["https://i.pinimg.com/736x/11/2a/2a/112a2ab43d03418c1c35924c15e8245b.jpg", ""],
									["https://i.pinimg.com/736x/1f/ee/28/1fee2803012b8af8ed4e89667f7d8c32.jpg", ""],
									["https://i.pinimg.com/736x/24/6b/86/246b86c2d2e640266c2c6114af918d79.jpg", ""],
									["https://i.pinimg.com/736x/0a/7e/1a/0a7e1a9d5e6611c2efed763916f40eae.jpg", ""],
									["https://i.pinimg.com/736x/4e/35/ae/4e35ae222cdcaaf482c33f2fc7c1cd55.jpg", ""],
									["https://i.pinimg.com/736x/73/ab/51/73ab51f8d3d8758c6d280af920cef1dc.jpg", ""],
									["https://i.pinimg.com/736x/03/f5/52/03f55231495b3f044ca13383911fbb5e.jpg", ""],
									["https://i.pinimg.com/736x/c0/16/f4/c016f46c38b2233e45d73bde06adaca6.jpg", ""],
									["https://i.pinimg.com/736x/88/b6/7d/88b67d1935684d33717b1e845fe5fd96.jpg", ""],
									["https://i.pinimg.com/736x/47/50/d8/4750d88e7577c6620a9e71b3f551f8f3.jpg", ""],
									["https://i.pinimg.com/736x/9d/e8/67/9de8676ecc83a9a1720e5f1f12ebbd77.jpg", ""],
									["https://i.pinimg.com/736x/33/31/44/33314493a616feb3d83b3997f1cd3ca2.jpg", ""],
									["https://i.pinimg.com/736x/b0/62/03/b06203ecd84a28b91fbaf23b2c9d020f.jpg", ""],
									["https://i.pinimg.com/736x/ca/d5/14/cad514486eea8de6d900504414879d3e.jpg", ""],
									["https://i.pinimg.com/736x/ab/1d/bf/ab1dbfd25da042dadc2fe3b21a8a2261.jpg", ""],
									["https://i.pinimg.com/736x/1f/c5/03/1fc503d7397c5b1168cf78df1f5e3eb4.jpg", ""],
									["https://i.pinimg.com/736x/33/ba/a8/33baa8ad0cb9f49990c56fae966425d5.jpg", ""],
									["https://i.pinimg.com/736x/e9/a7/e6/e9a7e6685254c07b91b0f1d6cd04af62.jpg", ""],
									["https://i.pinimg.com/736x/4e/cc/f1/4eccf1991d4a8569f51ac519922e9cb4.jpg", ""],
									["https://i.pinimg.com/736x/14/e9/58/14e958d47b4c29e679edf199e2ecc63e.jpg", ""],
									["https://i.pinimg.com/736x/3a/b9/89/3ab98919dd3e107332329fb9f10ca567.jpg", ""],
									["https://i.pinimg.com/736x/c9/bc/1c/c9bc1cc7038cac85675ca753c59a887e.jpg", ""],
									["https://i.pinimg.com/736x/bc/bc/17/bcbc1707b56aa2f0a2b6cf14c699df85.jpg", ""],
									["https://i.pinimg.com/736x/a7/c7/cd/a7c7cdb5a8615a112745e19c0399545e.jpg", ""],
									["https://i.pinimg.com/736x/7b/53/ee/7b53eed2fb987215b7fd8615c9d03bbe.jpg", ""],
									["https://i.pinimg.com/736x/15/e5/c8/15e5c844934eca5d29d8683d1fcabe0f.jpg", ""],
									["https://i.pinimg.com/736x/93/79/1f/93791fbf47640542935a53a018803d97.jpg", ""],
									["https://i.pinimg.com/736x/74/49/c6/7449c6557adc0b0157b10fb83e0ba967.jpg", ""],
									["https://i.pinimg.com/736x/7d/80/07/7d8007d73ca383bca3c4c8be4ae7aac4.jpg", ""],
									["https://i.pinimg.com/736x/ea/ec/ab/eaecabc192c78491fcfad2907b36257d.jpg", ""],
									["https://i.pinimg.com/736x/d9/0d/cf/d90dcff55abe33ee6e4fbc7f703aabe3.jpg", ""],
									["https://i.pinimg.com/736x/ea/9f/67/ea9f67761eb0b2e4ece7a512b2ed19f8.jpg", ""],
									["https://i.pinimg.com/736x/10/46/90/104690515b46ba543bd4440c6a23fc79.jpg", ""],
									["https://i.pinimg.com/736x/1d/32/4d/1d324d5f4ab52119e2c1045caea870e7.jpg", ""],
									["https://i.pinimg.com/736x/a7/35/80/a735804d41369aa75d667a75a2402d0e.jpg", ""],
									["https://i.pinimg.com/736x/96/2c/fd/962cfd3e511cbce575bb9effef3a15cb.jpg", ""],
									["https://i.pinimg.com/736x/e3/29/58/e32958bff9c24f11c40cce7a8d60d9c1.jpg", ""],
									["https://i.pinimg.com/736x/8e/e1/bb/8ee1bba464a5e95d05587a3dddbf9a88.jpg", ""],
									["https://i.pinimg.com/736x/8d/72/f8/8d72f8b5ea7d15d6f5041006b96da416.jpg", ""],
									["https://i.pinimg.com/736x/ce/a5/2f/cea52f262f1a8650de611d68d548ac4b.jpg", ""],
									["https://i.pinimg.com/736x/b9/c6/22/b9c622f5d012137b479b0e73021e153c.jpg", ""],
									["https://i.pinimg.com/736x/bf/62/06/bf62062d0ddf7f90211ebaa8d246712b.jpg", ""],
									["https://i.pinimg.com/736x/a5/dd/7d/a5dd7d00bed98d9bfe800a3472c093c3.jpg", ""],
									["https://i.pinimg.com/736x/ec/c7/3f/ecc73f3bd06d0994f3a38631e0b8d8d8.jpg", ""],
									["https://i.pinimg.com/736x/d2/57/d7/d257d79dc94a77eef8596a700705d3c7.jpg", ""],
									["https://i.pinimg.com/736x/ee/19/9c/ee199ce231a4708ff05104ae50b05faf.jpg", ""],
									["https://i.pinimg.com/736x/4f/66/6a/4f666a10db1e8d37b5c50cc4ec989ecd.jpg", ""],
									["https://i.pinimg.com/736x/f8/b8/e9/f8b8e90d69a6caf4a98f7fc1422cb57e.jpg", ""],
									["https://i.pinimg.com/736x/7e/24/ed/7e24ed7b6081e2e6287e6c87d59d0a44.jpg", ""],
									["https://i.pinimg.com/736x/90/56/2c/90562c6f6ae0625e18b00c5c80fb3fe4.jpg", ""],
									["https://i.pinimg.com/736x/aa/26/94/aa269405919a4120f42c5046860efc8c.jpg", ""],
									["https://i.pinimg.com/736x/5e/b8/41/5eb8413778463b2731ad91aa3fe68d56.jpg", ""],
									["https://i.pinimg.com/736x/80/aa/c6/80aac6387c9183981d807a125c335fb1.jpg", ""],
									["https://i.pinimg.com/736x/ab/ab/cf/ababcfecc1cde51d3161ddbba021abc9.jpg", ""],
									["https://i.pinimg.com/736x/bc/70/51/bc7051e387ef11ac4741c7a672f11191.jpg", ""],
									["https://i.pinimg.com/736x/86/56/2c/86562c249a9171b92eeef1ba53f88417.jpg", ""],
									["https://i.pinimg.com/736x/8a/41/cf/8a41cf89fa91914ae80c652026ca3e29.jpg", ""],
									["https://i.pinimg.com/736x/e5/20/40/e52040063a44dd1074f971abb3d5d050.jpg", ""],
									["https://i.pinimg.com/736x/57/08/ae/5708aed77a3e05e4af48ae084ddf0771.jpg", ""],
									["https://i.pinimg.com/736x/f8/7b/36/f87b36416e9e7f0e113b5b355fb4701b.jpg", ""],
									["https://i.pinimg.com/736x/08/93/98/089398e21614b5a60174430111aa0312.jpg", ""],
									["https://i.pinimg.com/736x/03/de/ee/03deee8328b4e539e3478ca6c90f6bf2.jpg", ""],
									["https://i.pinimg.com/736x/4d/b9/31/4db931274d0392a2c6e6d6898aedc8d5.jpg", ""],
									["https://i.pinimg.com/736x/31/45/4e/31454e14a6e07ff375d271605866a530.jpg", ""],
									["https://i.pinimg.com/736x/c0/4f/8a/c04f8abac2a40efc2a1326ee8f1501d7.jpg", ""],
									["https://i.pinimg.com/736x/2a/83/fd/2a83fd902ebf77e7a597c31fa3ff404d.jpg", ""],
									["https://i.pinimg.com/736x/48/87/d5/4887d5764fced6e45f152d7788d64903.jpg", ""],
									["https://i.pinimg.com/736x/5a/c6/0a/5ac60afdb26834a1859ebd9d0f3e3fdb.jpg", ""],
									["https://i.pinimg.com/736x/45/28/43/45284345c63b11e921c140349ede611a.jpg", ""],
									["https://i.pinimg.com/736x/b1/47/b5/b147b5673ec92ae175c2ffb7b1df9389.jpg", ""],
									["https://i.pinimg.com/736x/dc/ab/42/dcab429ab0a7c2091e6e4e7fce94d397.jpg", ""],
									["https://i.pinimg.com/736x/2c/c9/34/2cc934cbeff939aa7d46db99016f6289.jpg", ""],
									["https://i.pinimg.com/736x/6c/5d/a2/6c5da2d1653b9a8119587ad87a4d8516.jpg", ""],
									["https://i.pinimg.com/736x/79/1b/1e/791b1eecb63f918b811e1ebae004e890.jpg", ""],
									["https://i.pinimg.com/736x/70/de/ba/70deba632d6765cf315be9519981a218.jpg", ""],
									["https://i.pinimg.com/736x/57/bf/fd/57bffd3a175f49a117049db8fb0c6c0c.jpg", ""],
									["https://i.pinimg.com/736x/b6/c3/f7/b6c3f73433f03156d87eaa616aa5ff31.jpg", ""],
									["https://i.pinimg.com/736x/47/dd/a3/47dda3338d86a5980b58bdbda37c9334.jpg", ""],
									["https://i.pinimg.com/736x/2c/2d/52/2c2d528a61dc348ff57fe71c73f19580.jpg", ""],
									["https://i.pinimg.com/736x/d6/c7/90/d6c79045f495195efb02fcec6f827d48.jpg", ""],
									["https://i.pinimg.com/736x/49/93/08/499308fceab5671fac2e0347398c6d15.jpg", ""],
									["https://i.pinimg.com/736x/9b/09/d7/9b09d78e581bd7e52d9cfe77a1841c17.jpg", ""],
									["https://i.pinimg.com/736x/37/10/76/3710765b4ff11f7d6e51fca56807f664.jpg", ""],
									["https://i.pinimg.com/736x/00/66/67/0066670aa8c95e2b4e494dca8b662aab.jpg", ""],
									["https://i.pinimg.com/736x/ed/32/68/ed3268aca722274711edc8fceb0eb486.jpg", ""],
									["https://i.pinimg.com/736x/ee/28/ac/ee28ac9c73422f4dbd4393c78d776c45.jpg", ""],
									["https://i.pinimg.com/736x/ec/d4/31/ecd4315d00ad9da3a22f7507d540d217.jpg", ""],
									["https://i.pinimg.com/736x/2e/86/8e/2e868e9c6f15100c6762c4788fbe0e1b.jpg", ""],
									["https://i.pinimg.com/736x/13/b3/aa/13b3aa354087ec780bc6bd73a4846abd.jpg", ""],
									["https://i.pinimg.com/736x/d3/cd/20/d3cd2077eb018f020dfb18bdb4995519.jpg", ""],
									["https://i.pinimg.com/736x/18/41/6f/18416f4f282b3f65709cbd64941873a7.jpg", ""],
									["https://i.pinimg.com/736x/59/ca/b0/59cab055d448aa7ec358dc458d036359.jpg", ""],
									["https://i.pinimg.com/736x/f6/26/22/f62622aab0acef78be3430b031441f38.jpg", ""],
									["https://i.pinimg.com/736x/d9/5e/77/d95e77cf18368e5c45343b4a2dfa4755.jpg", ""],
									["https://i.pinimg.com/736x/47/7f/5b/477f5b5b7d08ef2cc03e18b397243f3e.jpg", ""],
									["https://i.pinimg.com/736x/8e/6e/eb/8e6eeb516eea0925a7d993a32006132f.jpg", ""],
									["https://i.pinimg.com/736x/ab/67/cc/ab67ccdc946b88396353d16577ac698d.jpg", ""],
									["https://i.pinimg.com/736x/1f/50/07/1f5007ef0afb4abb88e3c3d563640b71.jpg", ""],
									["https://i.pinimg.com/736x/3c/e9/3d/3ce93d010e64bf3ce12070d1c9567780.jpg", ""],
									["https://i.pinimg.com/736x/5c/c2/38/5cc238b1bea2b5e7b29fb19261e28086.jpg", ""],
									["https://i.pinimg.com/736x/01/84/fc/0184fc90bad94656a8cbea6b54d0ec6f.jpg", ""],
									["https://i.pinimg.com/736x/ff/8f/f1/ff8ff166fa13233fd2f55f85ac36e196.jpg", ""],
									["https://i.pinimg.com/736x/00/ec/4b/00ec4b1726fd3e6b1537722e2e7d041e.jpg", ""],
									["https://i.pinimg.com/736x/d2/71/b8/d271b89572f28af38a946714f5dd71a1.jpg", ""],
									["https://i.pinimg.com/736x/69/26/fc/6926fc69d7a6818071eda933d8db0385.jpg", ""],
									["https://i.pinimg.com/736x/e4/c0/75/e4c075310c700d5f7dc212fe35db9036.jpg", ""],
									["https://i.pinimg.com/736x/ef/09/29/ef09294cfdc53ea6143d17f4eb34a773.jpg", ""],
									["https://i.pinimg.com/736x/51/c6/7b/51c67bb30c1f8bac14858baca0c5c485.jpg", ""],
									["https://i.pinimg.com/736x/e9/fb/e6/e9fbe673a8c85f4c4dbadbdb70befbeb.jpg", ""],
									["https://i.pinimg.com/736x/24/e4/a2/24e4a273f3ecf7571165e514aa5a37e6.jpg", ""],
									["https://i.pinimg.com/736x/05/91/fd/0591fd112c39fb84cf7ee9ca65f328b6.jpg", ""],
									["https://i.pinimg.com/736x/a6/67/c4/a667c4a87636d62f7d874168a725150b.jpg", ""],
									["https://i.pinimg.com/736x/db/47/ae/db47ae43e2ac2d7cac107778804001e7.jpg", ""],
									["https://i.pinimg.com/736x/89/c6/c1/89c6c12020f8527d22c2bf914a37121f.jpg", ""],
									["https://i.pinimg.com/736x/68/17/14/681714c4a4ac196333510a94f344d030.jpg", ""],
									["https://i.pinimg.com/736x/bd/d5/b2/bdd5b23c3d4ca5dca3adf7456fb55836.jpg", ""],
									["https://i.pinimg.com/736x/e5/a9/a4/e5a9a4b20a2941bce179eae10a55be09.jpg", ""],
									["https://i.pinimg.com/736x/7b/78/fe/7b78fe9fee3d5c52ede2f3eb1a108ebb.jpg", ""],
									["https://i.pinimg.com/736x/dc/37/c5/dc37c5b81be4ad5fc3847055aa7a9886.jpg", ""],
									["https://i.pinimg.com/736x/c0/2c/89/c02c89f25863738e301caf4afa2fa720.jpg", ""],
									["https://i.pinimg.com/736x/0a/0d/3c/0a0d3c310ae92093e1dea0823ac3bb9d.jpg", ""],
									["https://i.pinimg.com/736x/e5/65/b8/e565b8e18cba2cdd87cc48eed2fc9e64.jpg", ""],
									["https://i.pinimg.com/736x/17/20/99/172099064f06fbd2490b36ec16ce5244.jpg", ""],
									["https://i.pinimg.com/736x/db/3c/7c/db3c7c4b84e696a9df608212b5540581.jpg", ""],
									["https://i.pinimg.com/736x/57/0b/52/570b524e9c57814a678dcf0455993684.jpg", ""],
									["https://i.pinimg.com/736x/5a/f4/49/5af4494d1b9885a257f94dd44c26069a.jpg", ""],
									["https://i.pinimg.com/736x/d5/2b/08/d52b08da7f1216c3922f2c0200fa878b.jpg", ""],
									["https://i.pinimg.com/736x/95/20/ca/9520cabd10577a49c66901815ccbba97.jpg", ""],
									["https://i.pinimg.com/736x/ac/df/c7/acdfc72791448c382d8a9fc4abd83f96.jpg", ""],
									["https://i.pinimg.com/736x/85/77/67/85776776e04b37fcc156c856799e3624.jpg", ""],
									["https://i.pinimg.com/736x/42/b9/25/42b92596a966c056bf1a4adca1fb16b5.jpg", ""],
									["https://i.pinimg.com/736x/aa/bd/b0/aabdb032a76ba5071ff56e1f347b3870.jpg", ""],
									["https://i.pinimg.com/736x/1d/b3/2c/1db32ccef73ca6726935963662bb398a.jpg", ""],
									["https://i.pinimg.com/736x/1c/4a/97/1c4a97a661d044c94093e6afdd99d101.jpg", ""],
									["https://i.pinimg.com/736x/a3/2d/cf/a32dcf60c008388beb37039fbe1447b4.jpg", ""],
									["https://i.pinimg.com/736x/36/20/e4/3620e410d3b5b9c1a6371f000ee7b162.jpg", ""],
									["https://i.pinimg.com/736x/76/a3/d7/76a3d7345cc48f7478c0aa63e663e580.jpg", ""],
									["https://i.pinimg.com/736x/f5/25/a6/f525a6030ea1c9688ef8c96d3471123e.jpg", ""],
									["https://i.pinimg.com/736x/91/67/70/9167703ce50944c61f2c536824f35587.jpg", ""],
									["https://i.pinimg.com/736x/1f/a4/60/1fa460ecb755398cd9b203cac7822355.jpg", ""],
									["https://i.pinimg.com/736x/07/3f/f8/073ff8c334df0544ad548be37adf45b7.jpg", ""],
									["https://i.pinimg.com/736x/ed/8e/7a/ed8e7aa82bf60c40b91af82e1ff0503a.jpg", ""],
									["https://i.pinimg.com/736x/07/5c/b9/075cb93be45e4154c7698bbd76e3c087.jpg", ""],
									["https://i.pinimg.com/736x/ec/e1/f3/ece1f36678f05ff8e8eb8bdde18ea0e2.jpg", ""],
									["https://i.pinimg.com/736x/71/1c/e3/711ce3d4ffb58f21044ecf09f2dd8ef7.jpg", ""],
									["https://i.pinimg.com/736x/f6/27/f7/f627f7f0eaa777a67b508dc45dd4f45e.jpg", ""],
									["https://i.pinimg.com/736x/3e/16/f1/3e16f1dba3b429fbd455647b66db7dc2.jpg", ""],
									["https://i.pinimg.com/736x/dc/af/0a/dcaf0a4748ea4c3a9cffea96094e47f8.jpg", ""],
									["https://i.pinimg.com/736x/af/1d/b5/af1db57b4db1b9dcbfeda30024a57ddb.jpg", ""],
									["https://i.pinimg.com/736x/e6/d5/e9/e6d5e993108e1f33750661d162ab7b31.jpg", ""],
									["https://i.pinimg.com/736x/40/30/f3/4030f325808b7ff2bda436897d57967f.jpg", ""],
									["https://i.pinimg.com/736x/5d/98/dc/5d98dcfc4b2f1f1a8f54fdc779c8c670.jpg", ""],
									["https://i.pinimg.com/736x/b5/dd/c7/b5ddc7a21abacf052443c2da3ced3f1d.jpg", ""],
									["https://i.pinimg.com/736x/ad/f8/a0/adf8a0fb62b6e24945071b49b2d9bf52.jpg", ""],
									["https://i.pinimg.com/736x/53/f6/f4/53f6f4690118434c17b4f32f54fe9f39.jpg", ""],
									["https://i.pinimg.com/736x/a3/27/b5/a327b5a05a9fceb4ee305f48b3861154.jpg", ""],
									["https://i.pinimg.com/736x/88/eb/6e/88eb6ea1ad6ad825879da5316cf0135c.jpg", ""],
									["https://i.pinimg.com/736x/6e/2d/76/6e2d762b892f80f1f3ab6247741dcc30.jpg", ""],
									["https://i.pinimg.com/736x/52/db/ee/52dbeeb8faceb7b29d6519d01784960e.jpg", ""],
									["https://i.pinimg.com/736x/2f/6b/fa/2f6bfa9cd237176812f25a049dce9ea0.jpg", ""],
									["https://i.pinimg.com/736x/f2/6f/07/f26f07814cef4dff72c1459faa3f027b.jpg", ""],
									["https://i.pinimg.com/736x/73/34/47/733447db3b6a8b187f62bd4a0831f46c.jpg", ""],
									["https://i.pinimg.com/736x/a7/45/98/a74598c4df363097ca17e344189be455.jpg", ""],
									["https://i.pinimg.com/736x/f5/7b/7e/f57b7e5c666510eeabefc348b25c2965.jpg", ""],
									["https://i.pinimg.com/736x/b4/73/ef/b473efb99406eade2f9881c335ac895e.jpg", ""],
									["https://i.pinimg.com/736x/77/23/47/772347e7b422026476e96af409951ce5.jpg", ""],
									["https://i.pinimg.com/736x/17/b3/09/17b309d8a4a9cfc1ec71b3efbb19ef34.jpg", ""],
									["https://i.pinimg.com/736x/a7/d1/78/a7d1785e66e110445116777eca27ce20.jpg", ""],
									["https://i.pinimg.com/736x/42/ed/ee/42edee2fe536d45bd3171effb14aa855.jpg", ""],
									["https://i.pinimg.com/736x/c3/cd/db/c3cddb6386307508996ecd0afedeec6b.jpg", ""],
									["https://i.pinimg.com/736x/c8/a7/45/c8a745c127a293fbc7979041063a167d.jpg", ""],
									["https://i.pinimg.com/736x/cc/2d/30/cc2d3063ea27e0e073c532d2cab2c79f.jpg", ""],
									["https://i.pinimg.com/736x/12/8a/c4/128ac448a1a11bd9cb117a61e4101342.jpg", ""],
									["https://i.pinimg.com/736x/e2/98/5a/e2985a8b13f3db8066637b1b969dbc64.jpg", ""],
									["https://i.pinimg.com/736x/d6/16/59/d61659ebab495ba56cd907a479ebbeb5.jpg", ""],
									["https://i.pinimg.com/736x/34/fd/1c/34fd1ca5d83c4402ea66bb9a3581087b.jpg", ""],
									["https://i.pinimg.com/736x/dd/c9/09/ddc909876eddf81dc3901e7de7abc0fd.jpg", ""],
									["https://i.pinimg.com/736x/a5/83/4e/a5834eca9e9a0fc6f51cd473cc6136d3.jpg", ""],
									["https://i.pinimg.com/736x/e7/b3/47/e7b34744a4b40f8e01a8338fdd1a7bf0.jpg", ""],
									["https://i.pinimg.com/736x/71/a3/2f/71a32f31bd93bca1b6ff49f2a4abd03f.jpg", ""],
									["https://i.pinimg.com/736x/36/17/0f/36170fce812e13d1a9a26f3d2dfae8fa.jpg", ""],
									["https://i.pinimg.com/736x/7f/9d/e3/7f9de3b554c436d21f50100dbb917b6a.jpg", ""],
									["https://i.pinimg.com/736x/5f/d6/cb/5fd6cbc670d9853e3f3b2e60fb8e66fc.jpg", ""],
									["https://i.pinimg.com/736x/e9/5d/51/e95d51141d906ff11deedc69c71aee85.jpg", ""],
									["https://i.pinimg.com/736x/38/86/a2/3886a2603a977b7b1a0c25a710d15a8d.jpg", ""],
									["https://i.pinimg.com/736x/53/39/3f/53393ffaf85ee3c5d2d54da881af9e7b.jpg", ""],
									["https://i.pinimg.com/736x/d6/7f/30/d67f30c47386bb5dbfc5ad6a7b0e6f16.jpg", ""],
									["https://i.pinimg.com/736x/0c/6e/24/0c6e248e9f20807bdbc81307423d7f05.jpg", ""],
									["https://i.pinimg.com/736x/f9/0f/7e/f90f7efecd3922d84730b7250c0543ba.jpg", ""],
									["https://i.pinimg.com/736x/16/d4/f6/16d4f63673f2b95a50ec2b9e29bd4f50.jpg", ""],
									["https://i.pinimg.com/736x/54/7f/ec/547fec35398e0b0771f195a7a9d634b3.jpg", ""]
									]'
						data-srclatino='[
										["", ""],
										["", ""]
										]'>
					<div class="book-card">
						<img src="https://i.pinimg.com/736x/a3/a3/db/a3a3db64ac0f5006693cee2931076aef.jpg"
							 class="book-cover"
							 alt="Portada del Volumen 1 del manga">

						<div class="book-info-bubble volume-number">
							<p class="info-title">Volumen</p>
							<p class="info-content">#01</p>
						</div>

						<div class="book-info-bubble chapter-count">
							<p class="info-title">Capítulos</p>
							<p class="info-content">1-298</p>
						</div>

						<button class="read-button" aria-label="Leer Volumen 1">Leer</button>
					</div>
				</div>
                <!-- Placeholder for other volumes -->
				<!-- Volumen 2 -->
				<div class="book-container" role="listitem"
						data-srcjp='[
									["", ""],
									["", ""]
									]'
						data-srclatino='[
										["", ""],
										["", ""]
										]'>
					<div class="book-card">
						<img src="https://i.pinimg.com/736x/aa/0a/ea/aa0aeacf5efdbb760901854a4fb3a8cf.jpg"
							 class="book-cover"
							 alt="Portada del Volumen 1 del manga">

						<div class="book-info-bubble volume-number">
							<p class="info-title">Volumen</p>
							<p class="info-content">#02</p>
						</div>

						<div class="book-info-bubble chapter-count">
							<p class="info-title">Capítulos</p>
							<p class="info-content">1-248</p>
						</div>

						<button class="read-button" aria-label="Leer Volumen 1">Leer</button>
					</div>
				</div>
				<!-- Volumen 3 -->
				<div class="book-container" role="listitem"
						data-srcjp='[
									["", ""],
									["", ""]
									]'
						data-srclatino='[
										["", ""],
										["", ""]
										]'>
					<div class="book-card">
						<img src="https://i.pinimg.com/736x/b7/ca/fd/b7cafd1bb0b8d5ec9dbecf9fb14a2e4a.jpg"
							 class="book-cover"
							 alt="Portada del Volumen 1 del manga">

						<div class="book-info-bubble volume-number">
							<p class="info-title">Volumen</p>
							<p class="info-content">#03</p>
						</div>

						<div class="book-info-bubble chapter-count">
							<p class="info-title">Capítulos</p>
							<p class="info-content">1-294</p>
						</div>

						<button class="read-button" aria-label="Leer Volumen 1">Leer</button>
					</div>
				</div>
				<!-- Volumen 4 -->
				<div class="book-container" role="listitem"
						data-srcjp='[
									["", ""],
									["", ""]
									]'
						data-srclatino='[
										["", ""],
										["", ""]
										]'>
					<div class="book-card">
						<img src="https://i.pinimg.com/736x/9a/9a/6f/9a9a6ff8eac84a71cf06895cf66ebe41.jpg"
							 class="book-cover"
							 alt="Portada del Volumen 1 del manga">

						<div class="book-info-bubble volume-number">
							<p class="info-title">Volumen</p>
							<p class="info-content">#04</p>
						</div>

						<div class="book-info-bubble chapter-count">
							<p class="info-title">Capítulos</p>
							<p class="info-content">1-217</p>
						</div>

						<button class="read-button" aria-label="Leer Volumen 1">Leer</button>
					</div>
				</div>
				<!-- Volumen 5 -->
				<div class="book-container" role="listitem"
						data-srcjp='[
									["", ""],
									["", ""]
									]'
						data-srclatino='[
										["", ""],
										["", ""]
										]'>
					<div class="book-card">
						<img src="https://i.pinimg.com/736x/73/2d/cb/732dcb4636076628899a0d1c05ffdab0.jpg"
							 class="book-cover"
							 alt="Portada del Volumen 1 del manga">

						<div class="book-info-bubble volume-number">
							<p class="info-title">Volumen</p>
							<p class="info-content">#05</p>
						</div>

						<div class="book-info-bubble chapter-count">
							<p class="info-title">Capítulos</p>
							<p class="info-content">1-270</p>
						</div>

						<button class="read-button" aria-label="Leer Volumen 1">Leer</button>
					</div>
				</div>
				<!-- Volumen 6 -->
				<div class="book-container" role="listitem"
						data-srcjp='[
									["", ""],
									["", ""]
									]'
						data-srclatino='[
										["", ""],
										["", ""]
										]'>
					<div class="book-card">
						<img src="https://i.pinimg.com/736x/65/47/db/6547db9fdfcd539ea92ee2772a449578.jpg"
							 class="book-cover"
							 alt="Portada del Volumen 1 del manga">

						<div class="book-info-bubble volume-number">
							<p class="info-title">Volumen</p>
							<p class="info-content">#06</p>
						</div>

						<div class="book-info-bubble chapter-count">
							<p class="info-title">Capítulos</p>
							<p class="info-content">1-264</p>
						</div>

						<button class="read-button" aria-label="Leer Volumen 1">Leer</button>
					</div>
				</div>

			</div>
		</div>
	</section>


	<section class="full-width-section" aria-labelledby="anime-section-title">
		<div class="episodes-main-container">
			<h3 id="anime-section-title" class="section-title"><span class="section-icon" aria-hidden="true">🎬</span>Anime</h3>
			<div class="category-container" role="region" aria-label="Temporada 1">
				<h3 class="section-title">Temporada 1</h3>
				<div class="episodes-grid" role="list" aria-label="Lista de episodios de la Temporada 1">
					<!-- Episodio 1 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/3b/s8/2/k/B/-/g/kB-gz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189405184-189419486"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/3b/s8/6/k/B/-/g/kB-gz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 1</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
                    <!-- Placeholder for other episodes -->
                    <!-- Episodio 2 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/af/s8/2/A/F/-/g/AF-gz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189450240-189464560"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/af/s8/6/A/F/-/g/AF-gz.0kob.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 2</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 3 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/e6/s8/2/O/J/-/g/OJ-gz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=188794368-188808684"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/e6/s8/6/O/J/-/g/OJ-gz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 3</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 4 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/3b/s8/2/0/M/-/g/0M-gz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189516288-189530598"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/3b/s8/6/0/M/-/g/0M-gz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 4</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 5 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/8c/s8/2/W/R/-/g/WR-gz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189569024-189583342"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/8c/s8/6/W/R/-/g/WR-gz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 5</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 6 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/5e/s8/2/y/5/-/g/y5-gz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189306880-189321192"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/5e/s8/6/y/5/-/g/y5-gz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 6</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 7 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/42/s8/2/k/a/_/g/ka_gz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189488128-189502530"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/42/s8/6/k/a/_/g/ka_gz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 7</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 8 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/7d/s8/2/I/g/_/g/Ig_gz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=187496448-187510673"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/7d/s8/6/I/g/_/g/Ig_gz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 8</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 9 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/a6/s8/2/W/j/_/g/Wj_gz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189162496-189176813"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/a6/s8/6/W/j/_/g/Wj_gz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 9</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 10 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/14/s8/2/o/n/_/g/on_gz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189177856-189192169"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/14/s8/6/o/n/_/g/on_gz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 10</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 11 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/14/s8/2/o/n/_/g/on_gz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189177856-189192169"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/0e/s8/6/i/r/c/h/irchz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 11</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 12 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/cf/s8/2/i/w/c/h/iwchz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189535744-189550057"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/cf/s8/6/i/w/c/h/iwchz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 12</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
                    <!-- Episodio 13 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/6a/s8/2/C/D/c/h/CDchz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189562368-189576673"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/6a/s8/6/C/D/c/h/CDchz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 13</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 14 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/49/s8/2/6/F/c/h/6Fchz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189252096-189266404"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/49/s8/6/6/F/c/h/6Fchz.0kob.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 14</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 15 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/b3/s8/2/M/J/c/h/MJchz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189903360-189917768"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/b3/s8/6/M/J/c/h/MJchz.0kob.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 15</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 16 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/e4/s8/2/m/q/E/h/mqEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189614592-189628900"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/e4/s8/6/m/q/E/h/mqEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 16</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 17 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/cb/s8/2/q/r/E/h/qrEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189357568-189371876"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/cb/s8/6/q/r/E/h/qrEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 17</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 18 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/9c/s8/2/M/u/E/h/MuEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189545984-189560293"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/9c/s8/6/M/u/E/h/MuEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 18</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 19 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/7c/s8/2/c/v/E/h/cvEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189393408-189407716"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/7c/s8/6/c/v/E/h/cvEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 19</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 20 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/80/s8/2/o/v/E/h/ovEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189110272-189124593"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/80/s8/6/o/v/E/h/ovEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 20</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 21 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/35/s8/2/E/v/E/h/EvEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189111296-189125606"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/35/s8/6/E/v/E/h/EvEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 21</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 22 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/13/s8/2/Y/v/E/h/YvEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189416960-189431368"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/13/s8/6/Y/v/E/h/YvEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 22</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 23 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/df/s8/2/8/v/E/h/8vEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189214208-189228533"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/df/s8/6/8/v/E/h/8vEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 23</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 24 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/5d/s8/2/k/w/E/h/kwEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189325824-189340135"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/5d/s8/6/k/w/E/h/kwEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 24</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 25 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/42/s8/2/E/w/E/h/EwEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189569536-189583840"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/42/s8/6/E/w/E/h/EwEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 25</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 26 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/14/s8/2/K/w/E/h/KwEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189396480-189410891"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/14/s8/6/K/w/E/h/KwEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 26</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 27 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/f2/s8/2/0/w/E/h/0wEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189423104-189437404"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/f2/s8/6/0/w/E/h/0wEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 27</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 28 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/ca/s8/2/g/x/E/h/gxEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189117952-189132373"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/ca/s8/6/g/x/E/h/gxEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 28</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 29 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/53/s8/2/o/x/E/h/oxEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189935616-189950020"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/53/s8/6/o/x/E/h/oxEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 29</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 30 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/f0/s8/2/w/x/E/h/wxEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189474816-189489124"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/f0/s8/6/w/x/E/h/wxEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 30</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 31 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/84/s8/2/e/y/E/h/eyEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189499392-189513708"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/84/s8/6/e/y/E/h/eyEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 31</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 32 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/a3/s8/2/k/y/E/h/kyEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189385216-189399534"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/a3/s8/6/k/y/E/h/kyEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 32</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 33 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/b6/s8/2/o/y/E/h/oyEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189566464-189580770"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/b6/s8/6/o/y/E/h/oyEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 33</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 34 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/75/s8/2/u/y/E/h/uyEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189221376-189235690"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/75/s8/6/u/y/E/h/uyEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 34</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 35 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/4b/s8/2/A/y/E/h/AyEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189191168-189205473"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/4b/s8/6/A/y/E/h/AyEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 35</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 36 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/dd/s8/2/G/y/E/h/GyEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189405184-189419497"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/dd/s8/6/G/y/E/h/GyEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 36</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 37 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/a1/s8/2/O/y/E/h/OyEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=188995072-189009388"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/a1/s8/6/O/y/E/h/OyEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 37</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 38 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/cf/s8/2/U/y/E/h/UyEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=188922880-188937188"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/cf/s8/6/U/y/E/h/UyEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 38</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 39 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/a4/s8/2/Y/y/E/h/YyEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189081088-189095504"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/a4/s8/6/Y/y/E/h/YyEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 39</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
                    <!-- Episodio 40 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/fb/s8/2/W/I/E/h/WIEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189017088-189031396"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/fb/s8/6/W/I/E/h/WIEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 40</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 41 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/f0/s8/2/c/J/E/h/cJEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189227520-189241825"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/f0/s8/6/c/J/E/h/cJEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 41</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 42 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/01/s8/2/C/J/E/h/CJEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189392896-189407198"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/01/s8/6/C/J/E/h/CJEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 42</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 43 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/b7/s8/2/W/J/E/h/WJEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189253120-189267428"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/b7/s8/6/W/J/E/h/WJEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 43</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 44 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/e1/s8/2/4/J/E/h/4JEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189435392-189449700"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/e1/s8/6/4/J/E/h/4JEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 44</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 45 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/ad/s8/2/k/K/E/h/kKEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=188696576-188710886"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/ad/s8/6/k/K/E/h/kKEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 45</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 46 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/c1/s8/2/s/K/E/h/sKEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189555200-189569508"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/c1/s8/6/s/K/E/h/sKEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 46</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 47 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/61/s8/2/E/K/E/h/EKEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189474816-189489123"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/61/s8/6/E/K/E/h/EKEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 47</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 48 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/16/s8/2/M/K/E/h/MKEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189542400-189556703"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/16/s8/6/M/K/E/h/MKEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 48</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 49 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/c9/s8/2/U/K/E/h/UKEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189620736-189635055"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/c9/s8/6/U/K/E/h/UKEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 49</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 50 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/7a/s8/2/e/L/E/h/eLEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189028864-189043171"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/7a/s8/6/e/L/E/h/eLEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 50</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 51 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/1a/s8/2/o/L/E/h/oLEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189114880-189129184"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/1a/s8/6/o/L/E/h/oLEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 51</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 52 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/8e/s8/2/w/L/E/h/wLEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189513728-189528040"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/8e/s8/6/w/L/E/h/wLEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 52</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 53 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/b9/s8/2/K/L/E/h/KLEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=188808192-188822497"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/b9/s8/6/K/L/E/h/KLEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 53</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 54 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/2d/s8/2/W/L/E/h/WLEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189131776-189146085"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/2d/s8/6/W/L/E/h/WLEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 54</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 55 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/d7/s8/2/8/L/E/h/8LEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=189118464-189132782"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/d7/s8/6/8/L/E/h/8LEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 55</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>
					<!-- Episodio 56 -->
					<div class="episode-card" role="listitem"
						 data-lid="ep1"
						 data-srcjp="https://1a-1791.com/video/fww1/75/s8/2/-/L/E/h/-LEhz.caa.tar?r_file=chunklist.m3u8&r_type=application%2Fvnd.apple.mpegurl&r_range=188627456-188641779"
						 data-srclatino=""
						 data-subtitles=""
						 style="background-image: url('https://1a-1791.com/video/fww1/75/s8/6/-/L/E/h/-LEhz.0kob.1.jpg')"
                         aria-label="Episodio 1">
						<div class="episode-content">
							<span class="episode-number-display">Episodio 56</span>
							<h4 class="episode-title"></h4>
						</div>
                        <button class="episode-play" aria-label="Reproducir Episodio 1">▶</button>
					</div>

				</div>
			</div>
		</div>
	</section>

    <!-- === Support Hub === -->
    <section class="support-hub-container" aria-labelledby="support-hub-title">
        <div class="support-hub-header">
            <h2 id="support-hub-title">Puedes Apoyarnos</h2>
            <p>Tu contribución hace posible que esta aventura continúe.<br>¡Puedes elegir tu forma de apoyar!</p>
        </div>
        <div class="support-hub">
            <div class="support-tabs" role="tablist" aria-label="Formas de apoyar">
                <button class="support-tab" id="tab-donate" role="tab" aria-selected="false" aria-controls="panel-donate">
                    <i class="fas fa-heart"></i> Donar
                </button>
                <button class="support-tab active" id="tab-ads" role="tab" aria-selected="true" aria-controls="panel-ads">
                    <i class="fas fa-ad"></i> Publicidad
                </button>
                <button class="support-tab" id="tab-share" role="tab" aria-selected="false" aria-controls="panel-share">
                    <i class="fas fa-share-alt"></i> Compartir
                </button>
            </div>
            <div class="support-panels">
                <div class="support-panel" id="panel-donate" role="tabpanel" tabindex="0" aria-labelledby="tab-donate" style="display: none;">
                    <p class="panel-description">Tu aporte directo nos impulsa a optimizar el sistema de remasterización, mejorando la experiencia y la calidad del contenido que disfrutas. ¡Cada contribución cuenta!</p>
                    <div class="panel-buttons">
                        <a href="https://ko-fi.com/remastersanime4k" target="_blank" rel="noopener noreferrer" class="support-btn support-btn-secondary">
                            <i class="fas fa-coffee"></i> Donar con ko-fi
                        </a>
                    </div>
                </div>
                <div class="support-panel active" id="panel-ads" role="tabpanel" tabindex="0" aria-labelledby="tab-ads" style="display: block;">
                    <p class="panel-description">Nuestra web se mantiene gracias a anuncios no intrusivos. ¡Con solo navegar, ya nos estás ayudando de forma gratuita!</p>
                    <div id="ad-slot-container" class="ad-slot-container">
                        <!-- El sistema de anuncios inyectará el contenido aquí -->
                    </div>
                </div>
                <div class="support-panel" id="panel-share" role="tabpanel" tabindex="0" aria-labelledby="tab-share" style="display: none;">
                    <p class="panel-description">¿Te gusta lo que hacemos? ¡Ayúdanos a llegar a más Personas! Compartir nuestro trabajo es una de las mejores formas de apoyarnos.</p>
                     <div class="panel-buttons">
                        <a href="#" class="support-btn support-btn-secondary">
                            <i class="fas fa-share-alt"></i> Compartir en Redes
                        </a>
                        <a href="#commentsSection" class="support-btn support-btn-primary" id="comment-link-btn">
                            <i class="fas fa-comment"></i> Dejar un Comentario
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

	<!-- === Modal manga (Updated HTML Structure) === -->
	<div class="manga-modal hidden" id="manga-reader-modal" role="dialog" aria-modal="true" aria-labelledby="manga-reader-title">
	  <div class="bg-gray-900"> 
          <h2 id="manga-reader-title" class="sr-only">Lector de Manga</h2>
		<button class="close-manga" aria-label="Cerrar lector de manga">&times;</button>

		<div class="manga-controls-header">
		  <button class="mode-btn active" data-mode="vertical" aria-pressed="true" aria-label="Cambiar a modo de lectura vertical">
			⬇︎ Vertical
		  </button>
		  <button class="mode-btn" data-mode="horizontal" aria-pressed="false" aria-label="Cambiar a modo de lectura horizontal">
			➡︎ Horizontal
		  </button>
		  <span class="page-counter" aria-live="polite">0/0</span>
		</div>
        <div class="manga-pages-outer-container"> 
            <div class="manga-pages vertical" id="manga-pages-container" role="region" aria-label="Páginas del manga">
              <!-- Páginas se insertan aquí por JavaScript -->
            </div>
        </div>

		<nav class="manga-nav-footer" aria-label="Navegación de páginas del manga">
		  <button class="prev-page" aria-label="Página anterior">Anterior</button>
		  <button class="next-page" aria-label="Página siguiente">Siguiente</button>
		</nav>

	  </div>
	</div>

	<!-- === Modal Video === -->
	<div class="video-modal" id="video-player-modal" role="dialog" aria-modal="true" aria-labelledby="video-player-title">
        <h2 id="video-player-title" class="sr-only">Reproductor de Video</h2>
		<div class="video-container">
			<div class="loading" aria-live="assertive">Cargando...</div>
			<button class="center-play" aria-label="Reproducir/Pausar video"></button>
			<video class="video-player" preload="metadata" crossorigin="anonymous">
                <p>Tu navegador no soporta la reproducción de video HTML5.</p>
			</video>
			<div class="controls-container">
				<div class="controls">
					<div class="progress-container" id="progress-container" role="slider" aria-label="Progreso del video" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" tabindex="0">
						<div class="buffer-bar" style="width: 0%;" aria-hidden="true"></div>
						<div class="progress-bar" style="width: 0%;" aria-hidden="true"></div>
					</div>
					<div class="buttons-container">
						<div class="left-controls">
							<button class="play-pause" aria-label="Reproducir">▶</button>
							<span class="time-display" aria-live="off"><span class="current-time">00:00</span> / <span class="duration">00:00</span></span>
						</div>
						<div class="right-controls">
							<button class="cc-button" title="Subtítulos (C)" aria-label="Activar/Desactivar subtítulos" aria-pressed="false">🇪🇸</button>
							<input type="range" class="volume-control" min="0" max="1" step="0.01" value="1" title="Volumen (Flechas Arriba/Abajo)" aria-label="Control de volumen">
							<button class="fullscreen" title="Pantalla Completa (F)" aria-label="Activar pantalla completa">⛶</button>
						</div>
					</div>
				</div>
			</div>
			<button class="close-modal" aria-label="Cerrar reproductor de video">X</button>
		</div>
	</div>
    
    <!-- Botón para cargar comentarios -->
    <div class="comments-toggle-container">
    <button id="toggleCommentsBtn" class="btn-comments">💬 Ver comentarios</button>
    </div>
    <section class="comments-section" id="commentsSection" style="display: none;">
    <!-- Aquí se cargará Giscus al hacer clic -->
    </section>

 <script>
 (function() {
    if ('addEventListener' in document) {
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof FastClick !== 'undefined') {
                FastClick.attach(document.body);
            }
        }, false);
    }

    // --- VIDEO PLAYER MODULE ---
    class VideoPlayer {
        constructor() {
            this.playerModal = document.getElementById('video-player-modal');
            if (!this.playerModal) {
                console.error("Video player modal not found.");
                return;
            }
            this.videoElement = this.playerModal.querySelector('video.video-player');
            this.videoContainer = this.playerModal.querySelector('.video-container');
            this.controls = {
                playPause: this.playerModal.querySelector('.play-pause'),
                volume: this.playerModal.querySelector('.volume-control'),
                progressContainer: this.playerModal.querySelector('#progress-container'),
                progressBar: this.playerModal.querySelector('.progress-bar'),
                bufferBar: this.playerModal.querySelector('.buffer-bar'),
                currentTime: this.playerModal.querySelector('.current-time'),
                duration: this.playerModal.querySelector('.duration'),
                closeBtn: this.playerModal.querySelector('.close-modal'),
                centerPlay: this.playerModal.querySelector('.center-play'),
                loading: this.playerModal.querySelector('.loading'),
                fullscreen: this.playerModal.querySelector('.fullscreen'),
                ccButton: this.playerModal.querySelector('.cc-button'),
            };

            this.hlsInstance = null;
            this.textTrack = null;
            this.controlsTimeout = null;
            this.isPlaying = false;
            this._currentVideoUrls = [];
            this._currentSubtitleUrl = null;
            this._currentVideoUrlIndex = 0;
            this._bufferInterval = null;
            this._lastOnErrorHandler = null;


            this.initializeVolume();
            this.setupEventListeners();
        }

        initializeVolume() {
            const savedVolume = localStorage.getItem('videoVolume') || "1";
            const volumeValue = parseFloat(savedVolume);
            if (this.videoElement) this.videoElement.volume = volumeValue;
            if (this.controls.volume) {
                this.controls.volume.value = volumeValue.toString();
                this.controls.volume.setAttribute('aria-valuenow', volumeValue.toString());
            }
        }

        setupEventListeners() {
            if (!this.controls.playPause) return; // Essential controls check

            this.controls.playPause.addEventListener('click', () => this.togglePlay());
            this.controls.volume.addEventListener('input', (e) => this.setVolume(parseFloat(e.target.value)));
            this.controls.closeBtn.addEventListener('click', () => this.close());
            this.controls.fullscreen.addEventListener('click', () => this.toggleFullscreen());
            this.controls.ccButton.addEventListener('click', () => this.toggleSubtitles());

            this.videoContainer.addEventListener('click', (e) => {
                if (e.target === this.videoContainer || e.target === this.videoElement) {
                    this.togglePlay();
                }
            });
            this.controls.centerPlay.addEventListener('click', (e) => {
                e.stopPropagation(); this.togglePlay();
            });

            this.controls.progressContainer.addEventListener('click', (e) => this.seek(e));
            this.controls.progressContainer.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                    e.preventDefault();
                    const newTime = this.videoElement.currentTime + (e.key === 'ArrowLeft' ? -5 : 5);
                    this.videoElement.currentTime = Math.max(0, Math.min(this.videoElement.duration || 0, newTime));
                }
            });

            this.videoElement.addEventListener('timeupdate', () => { this.updateProgress(); this.updateBufferBar(); });
            this.videoElement.addEventListener('loadedmetadata', () => this.updateDurationDisplay());
            this.videoElement.addEventListener('durationchange', () => this.updateDurationDisplay());
            this.videoElement.addEventListener('waiting', () => this.showLoading(true, "Cargando..."));
            this.videoElement.addEventListener('playing', () => this.showLoading(false));
            this.videoElement.addEventListener('canplay', () => this.showLoading(false));

            this.videoElement.addEventListener('play', () => {
                this.controls.centerPlay.classList.remove('visible');
                this.controls.playPause.setAttribute('aria-label', 'Pausar');
                this.controls.playPause.textContent = '⏸';
                this.controls.centerPlay.classList.add('playing');
                this.controls.centerPlay.setAttribute('aria-label', 'Pausar video');
                this.playerModal.classList.remove('paused');
                this.resetControlsTimeout();
                this._startBufferMonitoring();
            });
            this.videoElement.addEventListener('pause', () => {
                this.controls.centerPlay.classList.add('visible');
                this.controls.playPause.setAttribute('aria-label', 'Reproducir');
                this.controls.playPause.textContent = '▶';
                this.controls.centerPlay.classList.remove('playing');
                this.controls.centerPlay.setAttribute('aria-label', 'Reproducir video');
                this.playerModal.classList.add('paused');
                this.showControls();
                this._stopBufferMonitoring();
            });

            this.playerModal.addEventListener('mousemove', () => this.showControls());
            this.playerModal.addEventListener('touchstart', () => this.showControls(), { passive: true });
            this.playerModal.addEventListener('mouseleave', () => { if (!this.videoElement.paused) this.hideControls(); });
            this.playerModal.addEventListener('dblclick', (e) => {
                if (e.target === this.videoElement || e.target === this.videoContainer) {
                    this.toggleFullscreen();
                }
            });
            this.setupVideoTextTracks(); // Initial setup
             document.addEventListener('fullscreenchange', () => this.handleFullscreenChange());
             document.addEventListener('webkitfullscreenchange', () => this.handleFullscreenChange());
        }
         handleFullscreenChange() {
            const isFullscreen = document.fullscreenElement === this.playerModal || document.webkitFullscreenElement === this.playerModal;
            if (isFullscreen) {
                this.playerModal.classList.add('modal-is-actually-fullscreen');
                this.controls.fullscreen.innerHTML = '&#x26F6;'; // Shrink icon
                this.controls.fullscreen.setAttribute('aria-label', 'Salir de pantalla completa');
                this.controls.fullscreen.title = 'Salir de Pantalla Completa (F)';
            } else {
                this.playerModal.classList.remove('modal-is-actually-fullscreen');
                this.controls.fullscreen.textContent = '⛶';
                this.controls.fullscreen.setAttribute('aria-label', 'Activar pantalla completa');
                this.controls.fullscreen.title = 'Pantalla Completa (F)';
            }
        }

        open(videoUrls, subtitleUrl) {
            this._currentVideoUrls = videoUrls.split('|').map(url => url.trim()).filter(url => url !== '');
            this._currentSubtitleUrl = subtitleUrl;
            this._currentVideoUrlIndex = 0;

            if (this._currentVideoUrls.length > 0) {
                this.playWithFallback();
            } else {
                console.error('No valid video URLs found.');
                this.showLoading(true, 'Error: URL de video no válida.');
            }
        }

        playWithFallback() {
            if (this._currentVideoUrlIndex >= this._currentVideoUrls.length) {
                console.error('All video URLs failed.');
                this.showLoading(true, "Error al cargar video. Todas las fuentes fallaron.");
                return;
            }

            const url = this._currentVideoUrls[this._currentVideoUrlIndex];
            this.showLoading(true, `Cargando...`);


            if (this.hlsInstance) {
                this.hlsInstance.destroy();
                this.hlsInstance = null;
            }
            this.videoElement.innerHTML = ''; // Clear previous tracks
            this.videoElement.src = ''; // Clear previous src

            if (this._currentSubtitleUrl && this._currentSubtitleUrl !== 'null' && this._currentSubtitleUrl.trim() !== '') {
                const track = document.createElement('track');
                track.kind = 'subtitles';
                track.src = this._currentSubtitleUrl;
                track.srclang = 'es';
                track.label = 'Español';
                this.videoElement.appendChild(track);
            }
            this.setupVideoTextTracks();

            const onError = (eventData) => { 
                console.warn(`Error with video source: ${url}`, eventData);
                if (this.hlsInstance) { 
                    this.hlsInstance.destroy();
                    this.hlsInstance = null;
                }
                this._currentVideoUrlIndex++;
                this.playWithFallback(); 
            };
            
            this.videoElement.removeEventListener('error', this._lastOnErrorHandler); 
            this._lastOnErrorHandler = onError; 
            this.videoElement.addEventListener('error', this._lastOnErrorHandler, { once: true });


            if (url.includes('.m3u8')) {
                if (typeof Hls !== 'undefined' && Hls.isSupported()) {
                    this.hlsInstance = new Hls({ maxBufferLength: 30, maxMaxBufferLength: 60 });
                    this.hlsInstance.loadSource(url);
                    this.hlsInstance.attachMedia(this.videoElement);
                    this.hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => {
                        this._startPlayback();
                    });
                    this.hlsInstance.on(Hls.Events.ERROR, (event, data) => {
                        console.warn('HLS Error:', data);
                        if (data.fatal) {
                            onError(data); 
                        }
                    });
                } else if (this.videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                    this.videoElement.src = url;
                    this.videoElement.addEventListener('loadedmetadata', () => {
                         this._startPlayback();
                    }, { once: true });
                } else { 
                    onError('HLS not supported');
                }
            } else { 
                this.videoElement.src = url;
                this.videoElement.addEventListener('loadedmetadata', () => {
                     this._startPlayback();
                }, { once: true });
            }
        }

        _startPlayback() {
            this.showLoading(false);
            this.controls.progressBar.style.width = '0%';
            this.controls.currentTime.textContent = '00:00';
            this.updateDurationDisplay();

            this.videoElement.play()
                .then(() => {
                    this.playerModal.style.display = 'block';
                    document.body.classList.add('no-scroll');
                    this.isPlaying = true;
                    this.showControls();
                    this.playerModal.focus(); 
                })
                .catch(error => {
                    console.error('Error starting playback for URL:', this._currentVideoUrls[this._currentVideoUrlIndex], error);
                    this.showLoading(true, `Error: ${this.getErrorMessage(error)}`);
                });
        }

        close() {
            if (document.fullscreenElement && document.fullscreenElement === this.playerModal) {
				document.exitFullscreen().catch(e => console.warn("Error exiting fullscreen:", e));
			}
            if (this.hlsInstance) {
                this.hlsInstance.destroy();
                this.hlsInstance = null;
            }
            this.videoElement.pause();
            this.videoElement.removeAttribute('src'); 
            if (typeof this.videoElement.load === 'function') {
                this.videoElement.load(); 
            }
            this.videoElement.innerHTML = ''; 

            if (this._lastOnErrorHandler) {
                this.videoElement.removeEventListener('error', this._lastOnErrorHandler);
                this._lastOnErrorHandler = null;
            }

            this.playerModal.style.display = 'none';
            document.body.classList.remove('no-scroll');
            this.isPlaying = false;
            if(this.controls.progressBar) this.controls.progressBar.style.width = '0%';
            if(this.controls.bufferBar) this.controls.bufferBar.style.width = '0%';
            if(this.controls.currentTime) this.controls.currentTime.textContent = '00:00';
            if(this.controls.duration) this.controls.duration.textContent = '00:00';
            if(this.controls.centerPlay) this.controls.centerPlay.classList.remove('visible', 'playing');
            if(this.controls.playPause) this.controls.playPause.textContent = '▶';
            if(this.controls.ccButton) this.controls.ccButton.classList.remove('active');
            this._stopBufferMonitoring();
        }

        togglePlay() {
            if (this.videoElement.paused || this.videoElement.ended) {
                this.videoElement.play().catch(e => {
                     console.error("Play error during togglePlay:", e);
                     this.showLoading(true, `Error: ${this.getErrorMessage(e)}`);
                });
            } else {
                this.videoElement.pause();
            }
        }
        setVolume(value) {
            this.videoElement.volume = value;
            this.videoElement.muted = value === 0;
            this.controls.volume.value = value.toString();
            this.controls.volume.setAttribute('aria-valuenow', value.toString());
            this.controls.volume.setAttribute('aria-valuetext', `${Math.round(value * 100)}%`);
            localStorage.setItem('videoVolume', value.toString());
        }
        seek(e) {
            const rect = this.controls.progressContainer.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            const newTime = pos * (this.videoElement.duration || 0);
			if (!isNaN(newTime) && this.videoElement.seekable && this.videoElement.seekable.length > 0) {
                 let canSeek = false;
                for (let i = 0; i < this.videoElement.seekable.length; i++) {
                    if (newTime >= this.videoElement.seekable.start(i) && newTime <= this.videoElement.seekable.end(i)) {
                        canSeek = true;
                        break;
                    }
                }
                if (canSeek) this.videoElement.currentTime = newTime;
			}
        }
        updateProgress() {
            if (!this.videoElement || !this.videoElement.duration || isNaN(this.videoElement.duration)) return;
            const progressPercent = (this.videoElement.currentTime / this.videoElement.duration) * 100;
            this.controls.progressBar.style.width = `${progressPercent}%`;
            this.controls.currentTime.textContent = this.formatTime(this.videoElement.currentTime);
            this.controls.progressContainer.setAttribute('aria-valuenow', Math.round(progressPercent));
            this.controls.progressContainer.setAttribute('aria-valuetext', `${Math.round(this.videoElement.currentTime)}s de ${Math.round(this.videoElement.duration)}s`);
        }
        updateBufferBar() {
            if (!this.videoElement || !this.videoElement.buffered || this.videoElement.buffered.length === 0 || !this.videoElement.duration || isNaN(this.videoElement.duration)) {
                if(this.controls.bufferBar) this.controls.bufferBar.style.width = '0%'; return;
            }
			const buffered = this.videoElement.buffered;
			const duration = this.videoElement.duration;
			const currentTime = this.videoElement.currentTime;
            let bufferEnd = 0;
            for (let i = 0; i < buffered.length; i++) {
                if (buffered.start(i) <= currentTime && buffered.end(i) >= currentTime) {
                    bufferEnd = buffered.end(i); break;
                }
            }
            if (bufferEnd === 0 && buffered.length > 0) bufferEnd = buffered.end(buffered.length - 1);
			if(this.controls.bufferBar) this.controls.bufferBar.style.width = `${Math.min((bufferEnd / duration) * 100, 100)}%`;
        }
        updateDurationDisplay() {
			if (this.videoElement && this.videoElement.duration && !isNaN(this.videoElement.duration)) {
				this.controls.duration.textContent = this.formatTime(this.videoElement.duration);
                this.controls.progressContainer.setAttribute('aria-valuemax', Math.round(this.videoElement.duration));
			} else {
                if(this.controls.duration) this.controls.duration.textContent = '00:00';
            }
        }
        formatTime(timeInSeconds) {
            const seconds = Math.floor(timeInSeconds % 60).toString().padStart(2, '0');
            const minutes = Math.floor(timeInSeconds / 60) % 60 .toString().padStart(2, '0');
            const hours = Math.floor(timeInSeconds / 3600);
            return hours > 0 ? `${hours}:${minutes}:${seconds}` : `${minutes}:${seconds}`;
        }
        showLoading(show, message = "Cargando...") {
            if (!this.controls.loading) return;
            this.controls.loading.style.display = show ? 'block' : 'none';
            this.controls.loading.textContent = message;
        }
        showControls() {
            this.playerModal.classList.add('controls-visible');
            this.videoContainer.classList.remove('cursor-hidden');
            this.resetControlsTimeout();
        }
        hideControls() {
            if (!this.videoElement.paused) {
                this.playerModal.classList.remove('controls-visible');
                this.videoContainer.classList.add('cursor-hidden');
            }
        }
        resetControlsTimeout() {
            clearTimeout(this.controlsTimeout);
            if (!this.videoElement.paused) {
                this.controlsTimeout = setTimeout(() => this.hideControls(), 3000);
            }
        }
        toggleFullscreen() {
			const elem = this.playerModal;
			if (!document.fullscreenElement && !document.webkitFullscreenElement) {
				if (elem.requestFullscreen) elem.requestFullscreen().catch(err => console.error(`Fullscreen error: ${err.message}`));
				else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen();
			} else {
				if (document.exitFullscreen) document.exitFullscreen().catch(err => console.error(`Exit Fullscreen error: ${err.message}`));
                else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
			}
        }
        setupVideoTextTracks() {
            if (!this.videoElement || !this.controls.ccButton) return;
            const tracks = this.videoElement.textTracks;
            if (tracks && tracks.length > 0) {
                this.textTrack = tracks[0]; 
                for (let i = 0; i < tracks.length; i++) tracks[i].mode = 'hidden'; 
                this.controls.ccButton.style.display = 'flex';
                this.controls.ccButton.classList.remove('active');
                this.controls.ccButton.setAttribute('aria-pressed', 'false');
                tracks.onaddtrack = () => this.setupVideoTextTracks(); 
            } else {
                this.controls.ccButton.style.display = 'none';
            }
        }
        toggleSubtitles() {
            if (!this.textTrack) { 
                const tracks = this.videoElement.textTracks;
                if (tracks && tracks.length > 0) this.textTrack = tracks[0];
            }
			if (this.textTrack) {
				const isActive = this.textTrack.mode === 'showing';
				this.textTrack.mode = isActive ? 'hidden' : 'showing';
				this.controls.ccButton.classList.toggle('active', !isActive);
                this.controls.ccButton.setAttribute('aria-pressed', !isActive ? 'true' : 'false');
			}
        }
        _startBufferMonitoring() {
			this._stopBufferMonitoring();
			this._bufferInterval = setInterval(() => {
				if (!this.isPlaying || !this.videoElement || this.videoElement.readyState < 2) return; 
				const currentTime = this.videoElement.currentTime;
                let bufferedAhead = 0;
                for (let i = 0; i < this.videoElement.buffered.length; i++) {
                    if (this.videoElement.buffered.start(i) <= currentTime && this.videoElement.buffered.end(i) >= currentTime) {
                        bufferedAhead = this.videoElement.buffered.end(i) - currentTime; break;
                    }
                }
				if (bufferedAhead < 5 && this.videoElement.readyState < 3 && !this.videoElement.seeking) {
                    if (this.videoElement.paused) this.videoElement.play().catch(()=>{});
					this.showLoading(true, "Cargando...");
				} else if (bufferedAhead >= 5 && this.controls.loading.style.display === 'block' && this.controls.loading.textContent.includes("Buffering")) {
					this.showLoading(false); 
				}
			}, 1000);
		}
        _stopBufferMonitoring() { clearInterval(this._bufferInterval); }
        getErrorMessage(error) {
            if (!error) return 'Error al cargar el video.';
            if (error.name === 'NotSupportedError') return 'Formato no soportado.';
            if (error.name === 'AbortError') return 'Carga abortada.'; 
            if (error.message) { 
                 if (error.message.includes('NETWORK_ERR') || error.message.includes('Failed to fetch')) return 'Error de red.';
                 if (error.message.includes('MEDIA_ERR_DECODE')) return 'Error de decodificación.';
                 if (error.message.includes('MEDIA_ERR_SRC_NOT_SUPPORTED')) return 'Fuente no compatible.';
                 if (error.message.toLowerCase().includes('interrupted by a new load request')) return 'Carga interrumpida.';
            }
            return 'Error al cargar el video.';
        }
        handleKeyboard(e) { 
            if (e.target !== document.body && e.target.tagName !== 'VIDEO' && !e.target.classList.contains('progress-container')) return;
            switch (e.key) {
                case ' ': case 'k': e.preventDefault(); this.togglePlay(); break;
                case 'ArrowLeft': e.preventDefault(); this.videoElement.currentTime = Math.max(0, this.videoElement.currentTime - 5); break;
                case 'ArrowRight': e.preventDefault(); this.videoElement.currentTime = Math.min(this.videoElement.duration || 0, this.videoElement.currentTime + 5); break;
                case 'ArrowUp': e.preventDefault(); this.setVolume(Math.min(this.videoElement.volume + 0.1, 1)); break;
                case 'ArrowDown': e.preventDefault(); this.setVolume(Math.max(this.videoElement.volume - 0.1, 0)); break;
                case 'f': e.preventDefault(); this.toggleFullscreen(); break;
                case 'c': e.preventDefault(); this.toggleSubtitles(); break;
                case 'm': e.preventDefault(); this.videoElement.muted = !this.videoElement.muted; this.controls.volume.value = this.videoElement.muted ? "0" : this.videoElement.volume.toString(); break;
                case 'Escape': 
                    if (document.fullscreenElement === this.playerModal || document.webkitFullscreenElement === this.playerModal) {
                         e.preventDefault(); this.toggleFullscreen();
                    } else {
                         e.preventDefault(); this.close();
                    }
                    break;
            }
        }
    }

    // --- MANGA PLAYER MODULE (Enhanced) ---
    class MangaPlayer {
        constructor() {
            this.mangaModal = document.getElementById('manga-reader-modal');
            if (!this.mangaModal) { console.error("Manga modal not found."); return; }

            this.mangaPagesOuterContainer = this.mangaModal.querySelector('.manga-pages-outer-container');
            this.mangaPagesContainer = this.mangaModal.querySelector('#manga-pages-container');
            this.mangaCloseBtn = this.mangaModal.querySelector('.close-manga');
            this.mangaNextBtn  = this.mangaModal.querySelector('.next-page');
            this.mangaPrevBtn  = this.mangaModal.querySelector('.prev-page');
            this.mangaModeBtns = this.mangaModal.querySelectorAll('.mode-btn');
            this.mangaCounter  = this.mangaModal.querySelector('.page-counter');
            
            this._mangaPageSources = [];
            this._mangaIndex = 0; 
            this._currentSpreadIndex = 0; 
            this._mangaTotalPages = 0;
            this._mangaTotalSpreads = 0;

            this._mangaZoomLevel = 1;
            this._mangaPanX = 0; this._mangaPanY = 0;
            this._mangaInitialPanX = 0; this._mangaInitialPanY = 0;
            this._mangaIsPanning = false; this._mangaIsPinching = false;
            this._mangaTouchStartX = 0; this._mangaTouchStartY = 0;
            this._mangaLastTouchX = 0; this._mangaLastTouchY = 0;
            this._mangaInitialPinchDistance = 0;
            this._mangaInitialZoom = 1;
            this._mangaLastTapTime = 0;
            this._mangaControlsVisible = true;
            this._mangaControlsTimeoutId = null;
            this._mangaMinZoom = 1; this._mangaMaxZoom = 5;
            this._currentMode = 'vertical'; 
            this._intersectionObserver = null;

            this.setupEventListeners();
        }

        setupEventListeners() {
            this.mangaCloseBtn.addEventListener('click', () => this.close());
            
            this.mangaNextBtn.addEventListener('click', () => {
                if (this._currentMode === 'horizontal') this.navigatePage(-1); 
                else this.navigatePage(1); 
            });
            this.mangaPrevBtn.addEventListener('click', () => {
                if (this._currentMode === 'horizontal') this.navigatePage(1); 
                else this.navigatePage(-1); 
            });

            this.mangaModeBtns.forEach(btn => {
                btn.addEventListener('click', (e) => this.setMode(e.currentTarget.dataset.mode));
            });
            
            this.mangaPagesOuterContainer.addEventListener('touchstart', this.handleTouchStart.bind(this), { passive: false });
            this.mangaPagesOuterContainer.addEventListener('touchmove', this.handleTouchMove.bind(this), { passive: false });
            this.mangaPagesOuterContainer.addEventListener('touchend', this.handleTouchEnd.bind(this));
            this.mangaPagesOuterContainer.addEventListener('wheel', e => this.handleWheelScroll(e), { passive: false });
        }

        open(pageSourcesJson) {
            try {
                this._mangaPageSources = JSON.parse(pageSourcesJson);
            } catch (e) {
                console.error("Error parsing manga page sources:", e, pageSourcesJson);
                alert("Error al cargar datos del manga.");
                return;
            }

            this._mangaTotalPages = this._mangaPageSources.length;
            this._mangaTotalSpreads = Math.ceil(this._mangaTotalPages / 2);
            this._mangaIndex = 0;
            this._currentSpreadIndex = 0;
            
            this.resetZoomAndPan();

            this.mangaModal.classList.remove('hidden');
            this.mangaModal.classList.add('flex');
            document.body.classList.add('no-scroll');
            
            const initialMode = this._currentMode || 'vertical'; 
            this.setMode(initialMode, true); 
            
            this.updateNavigation();
            this.updateCounter();
            this._scrollToCurrentPage(false); 

            this.showControls(true);
        }

        _buildVerticalLayout() {
            this.mangaPagesContainer.innerHTML = '';
            const fragment = document.createDocumentFragment();
            this._mangaPageSources.forEach((pageUrls, index) => {
                this._createPageItemAndLoadImage(index, fragment, true);
            });
            this.mangaPagesContainer.appendChild(fragment);
        }

        _buildHorizontalLayout() {
            this.mangaPagesContainer.innerHTML = '';
            const fragment = document.createDocumentFragment();
            for (let s = 0; s < this._mangaTotalSpreads; s++) {
                const spreadDiv = document.createElement('div');
                spreadDiv.className = 'page-spread';
                spreadDiv.id = `manga-spread-${s}`;
                spreadDiv.setAttribute('role', 'group');
                spreadDiv.setAttribute('aria-label', `Doble página ${s + 1}`);

                const rightVisualSlot = document.createElement('div'); 
                rightVisualSlot.className = 'page-slot';
                const leftVisualSlot = document.createElement('div');  
                leftVisualSlot.className = 'page-slot';
                
                const pageIndexForVisuallyRight = s * 2; 
                const pageIndexForVisuallyLeft = s * 2 + 1;
                
                if (pageIndexForVisuallyRight < this._mangaTotalPages) {
                    this._createPageItemAndLoadImage(pageIndexForVisuallyRight, rightVisualSlot, false);
                } else { rightVisualSlot.innerHTML = ''; } 
                
                if (pageIndexForVisuallyLeft < this._mangaTotalPages) {
                    this._createPageItemAndLoadImage(pageIndexForVisuallyLeft, leftVisualSlot, false);
                } else { leftVisualSlot.innerHTML = ''; } 
                
                spreadDiv.appendChild(leftVisualSlot);  
                spreadDiv.appendChild(rightVisualSlot); 
                fragment.appendChild(spreadDiv);
            }
            this.mangaPagesContainer.appendChild(fragment);
        }

        _createPageItemAndLoadImage(pageIndexToLoad, parentElement, isDirectChildInContainer) {
            const pageItem = document.createElement('div');
            pageItem.className = 'page-item';
            pageItem.dataset.pageIndex = pageIndexToLoad.toString(); 

            if (isDirectChildInContainer) { 
                pageItem.id = `manga-page-${pageIndexToLoad}`;
            }
            pageItem.setAttribute('role', 'img');
            pageItem.setAttribute('aria-label', `Página de manga ${pageIndexToLoad + 1}`);
            this._updateLoadingIndicator(pageItem, true);

            const img = document.createElement('img');
            img.alt = `Página ${pageIndexToLoad + 1}`;
            const pageUrls = this._mangaPageSources[pageIndexToLoad] || [];
            img.dataset.sourceUrls = JSON.stringify(pageUrls);
            img.dataset.currentSourceIndex = "0";

            img.onload = () => this._updateLoadingIndicator(pageItem, false);
            img.onerror = (e) => this.handleImageError(e.target, pageItem);
            
            if (pageUrls.length > 0) img.src = pageUrls[0];
            else this.handleImageError(img, pageItem);

            pageItem.appendChild(img);
            parentElement.appendChild(pageItem);
            return pageItem;
        }

        _setupIntersectionObserverForVerticalScroll() {
            if (this._intersectionObserver) {
                this._intersectionObserver.disconnect();
            }
    
            const options = {
                root: this.mangaPagesContainer,
                rootMargin: '0px',
                threshold: 0.5 
            };
    
            this._intersectionObserver = new IntersectionObserver((entries, observer) => {
                let mostVisibleEntry = null;
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (!mostVisibleEntry || entry.intersectionRatio > mostVisibleEntry.intersectionRatio) {
                            mostVisibleEntry = entry;
                        }
                    }
                });
    
                if (mostVisibleEntry) {
                    const pageIndexStr = mostVisibleEntry.target.dataset.pageIndex;
                    if (pageIndexStr) {
                        const pageIndex = parseInt(pageIndexStr, 10);
                        if (!isNaN(pageIndex) && this._mangaIndex !== pageIndex) {
                            this._mangaIndex = pageIndex;
                            this.updateCounter();
                            this.updateNavigation();
                        }
                    }
                }
            }, options);
    
            this.mangaPagesContainer.querySelectorAll('.page-item').forEach(item => {
                this._intersectionObserver.observe(item);
            });
        }


        close() {
            this.mangaModal.classList.add('hidden');
            this.mangaModal.classList.remove('flex');
            document.body.classList.remove('no-scroll');
            this.resetZoomAndPan();
            clearTimeout(this._mangaControlsTimeoutId);
            if (this._intersectionObserver) {
                this._intersectionObserver.disconnect();
                this._intersectionObserver = null;
            }
        }

        handleImageError(imgElement, pageItemElement) {
            let currentSourceIndex = parseInt(imgElement.dataset.currentSourceIndex, 10);
            const sourceUrls = JSON.parse(imgElement.dataset.sourceUrls);
            currentSourceIndex++;
            if (currentSourceIndex < sourceUrls.length) {
                imgElement.src = sourceUrls[currentSourceIndex];
                imgElement.dataset.currentSourceIndex = currentSourceIndex.toString();
            } else {
                const pageIndexForError = pageItemElement.dataset.pageIndex || 'desconocida';
                console.warn(`All sources failed for page ${pageIndexForError}`);
                imgElement.alt = `Error al cargar página ${parseInt(pageIndexForError,10) + 1}`;
                this._updateLoadingIndicator(pageItemElement, false, true); 
            }
        }
        _updateLoadingIndicator(element, isLoading, isError = false) { 
            if (!element) return;
            element.classList.remove('loading', 'loaded', 'error');
            let spinner = element.querySelector('.loading-spinner');
            let text = element.querySelector('.loading-text');

            if (isLoading) {
                element.classList.add('loading');
                if (!spinner) { spinner = document.createElement('div'); spinner.className = 'loading-spinner'; element.appendChild(spinner); }
                if (!text) { text = document.createElement('span'); text.className = 'loading-text'; element.appendChild(text); }
                text.textContent = 'Cargando...';
                spinner.style.display = 'block'; text.style.display = 'block';
            } else {
                if (spinner) spinner.style.display = 'none';
                if (text) text.style.display = 'none';
                if (isError) {
                    element.classList.add('error');
                    if (text) { text.textContent = 'Error al cargar'; text.style.display = 'block'; }
                    else { 
                        text = document.createElement('span'); text.className = 'loading-text';
                        text.textContent = 'Error al cargar'; element.appendChild(text); text.style.display = 'block';
                    }
                } else {
                    element.classList.add('loaded');
                }
            }
        }
        setMode(mode, calledFromOpen = false) {
            this._currentMode = mode;
            if (this._intersectionObserver) { 
                this._intersectionObserver.disconnect();
                this._intersectionObserver = null;
            }

            this.mangaPagesContainer.classList.toggle('horizontal', mode === 'horizontal');
            this.mangaPagesContainer.classList.toggle('vertical', mode === 'vertical');
            this.mangaModeBtns.forEach(btn => {
                const isActive = btn.dataset.mode === mode;
                btn.classList.toggle('active', isActive);
                btn.setAttribute('aria-pressed', isActive.toString());
            });

            if (mode === 'horizontal') {
                this._buildHorizontalLayout();
                this.mangaPrevBtn.innerHTML = 'Siguiente &#8250;'; 
                this.mangaPrevBtn.setAttribute('aria-label', 'Siguiente doble página');
                this.mangaNextBtn.innerHTML = '&#8249; Anterior'; 
                this.mangaNextBtn.setAttribute('aria-label', 'Anterior doble página');
            } else {
                this._buildVerticalLayout();
                this._setupIntersectionObserverForVerticalScroll(); 
                this.mangaPrevBtn.innerHTML = '&#8249; Anterior';
                this.mangaPrevBtn.setAttribute('aria-label', 'Página anterior');
                this.mangaNextBtn.innerHTML = 'Siguiente &#8250;';
                this.mangaNextBtn.setAttribute('aria-label', 'Página siguiente');
            }
            
            this.resetZoomAndPan();
            if (!calledFromOpen) { 
                this._scrollToCurrentPage(false);
                this.updateNavigation();
                this.updateCounter();
            }
            this.showControls();
        }

        navigatePage(direction) {
            let changed = false;
            if (this._currentMode === 'vertical') {
                const newIndex = this._mangaIndex + direction;
                if (newIndex >= 0 && newIndex < this._mangaTotalPages) {
                    this._mangaIndex = newIndex;
                    changed = true;
                }
            } else { 
                const newSpreadIndex = this._currentSpreadIndex + direction;
                if (newSpreadIndex >= 0 && newSpreadIndex < this._mangaTotalSpreads) {
                    this._currentSpreadIndex = newSpreadIndex;
                    this._mangaIndex = this._currentSpreadIndex * 2; 
                    changed = true;
                }
            }

            if (changed) {
                this.resetZoomAndPan();
                this._scrollToCurrentPage(true);
                this.updateNavigation();
                this.updateCounter();
                this.showControls();
            }
        }

        _scrollToCurrentPage(smooth = true) {
            if (this._currentMode === 'vertical') {
                const pageElement = this.mangaPagesContainer.querySelector(`#manga-page-${this._mangaIndex}`);
                if (pageElement) {
                    pageElement.scrollIntoView({ behavior: smooth ? 'smooth' : 'auto', block: 'nearest' });
                }
            } else { 
                const spreadElement = this.mangaPagesContainer.querySelector(`#manga-spread-${this._currentSpreadIndex}`);
                if (spreadElement) {
                    this.mangaPagesContainer.scrollTo({ left: spreadElement.offsetLeft, behavior: smooth ? 'smooth' : 'auto'});
                }
            }
        }

        updateNavigation() {
            if (this._currentMode === 'vertical') {
                this.mangaPrevBtn.disabled = this._mangaIndex === 0;
                this.mangaNextBtn.disabled = this._mangaIndex >= this._mangaTotalPages - 1;
            } else { 
                this.mangaPrevBtn.disabled = this._currentSpreadIndex >= this._mangaTotalSpreads - 1; 
                this.mangaNextBtn.disabled = this._currentSpreadIndex === 0; 
            }
        }

        updateCounter() {
            if (this._currentMode === 'vertical') {
                this.mangaCounter.textContent = `Página ${this._mangaIndex + 1} / ${this._mangaTotalPages}`;
                this.mangaCounter.setAttribute('aria-label', `Página ${this._mangaIndex + 1} de ${this._mangaTotalPages}`);
            } else { 
                const firstPageInSpread = this._currentSpreadIndex * 2;
                const secondPageInSpread = firstPageInSpread + 1;
                let text = "";

                if (this._mangaTotalPages === 0) {
                    text = `0 / 0`;
                } else if (secondPageInSpread < this._mangaTotalPages) { 
                    text = `Páginas ${secondPageInSpread + 1}-${firstPageInSpread + 1} de ${this._mangaTotalPages}`;
                } else if (firstPageInSpread < this._mangaTotalPages) { 
                    text = `Página ${firstPageInSpread + 1} de ${this._mangaTotalPages}`;
                } else { 
                     text = `Doble Página ${this._currentSpreadIndex + 1} / ${this._mangaTotalSpreads}`;
                }
                this.mangaCounter.textContent = text;
            }
        }

        _getCurrentMangaElementForZoom() {
            if (this._currentMode === 'vertical') {
                const pageElement = this.mangaPagesContainer.querySelector(`#manga-page-${this._mangaIndex}`);
                return pageElement ? pageElement.querySelector('img') : null;
            } else { 
                return this.mangaPagesContainer.querySelector(`#manga-spread-${this._currentSpreadIndex}`);
            }
        }

        handleTouchStart(e) {
            const targetElement = this._getCurrentMangaElementForZoom();
            if (!targetElement) return;

            if (e.touches.length === 1 && this._mangaZoomLevel > 1) {
                e.preventDefault(); this._mangaIsPanning = true;
                this.mangaPagesOuterContainer.classList.add('grabbing');
                this._mangaTouchStartX = e.touches[0].clientX; this._mangaTouchStartY = e.touches[0].clientY;
                this._mangaInitialPanX = this._mangaPanX; this._mangaInitialPanY = this._mangaPanY;
            } else if (e.touches.length === 1) {
                 this._mangaTouchStartX = e.touches[0].clientX; this._mangaTouchStartY = e.touches[0].clientY;
                 this._mangaLastTouchX = this._mangaTouchStartX; this._mangaLastTouchY = this._mangaTouchStartY; 
                 this._mangaIsPanning = false;
            } else if (e.touches.length === 2) {
                e.preventDefault(); this._mangaIsPinching = true; this._mangaIsPanning = false;
                this._mangaInitialPinchDistance = this.getDistanceBetweenTouches(e.touches);
                this._mangaInitialZoom = this._mangaZoomLevel;
            }
            this.showControls();
        }

        handleTouchMove(e) {
            const targetElement = this._getCurrentMangaElementForZoom();
            if (!targetElement) return;

            if (this._mangaIsPanning && e.touches.length === 1 && this._mangaZoomLevel > 1) {
                e.preventDefault();
                const deltaX = e.touches[0].clientX - this._mangaTouchStartX;
                const deltaY = e.touches[0].clientY - this._mangaTouchStartY;
                const newPanX = this._mangaInitialPanX + deltaX; const newPanY = this._mangaInitialPanY + deltaY;
                this.applyZoomAndPan(targetElement, this._mangaZoomLevel, newPanX, newPanY, true);
            } else if (this._mangaIsPinching && e.touches.length === 2) {
                e.preventDefault();
                const currentDistance = this.getDistanceBetweenTouches(e.touches);
                let newZoom = this._mangaInitialZoom * (currentDistance / this._mangaInitialPinchDistance);
                newZoom = Math.max(this._mangaMinZoom, Math.min(this._mangaMaxZoom, newZoom));
                
                const rect = this.mangaPagesOuterContainer.getBoundingClientRect();
                const touchCenterX = (e.touches[0].clientX + e.touches[1].clientX) / 2 - rect.left;
                const touchCenterY = (e.touches[0].clientY + e.touches[1].clientY) / 2 - rect.top;
                const imageOriginX = (touchCenterX - this._mangaPanX) / this._mangaZoomLevel; 
                const imageOriginY = (touchCenterY - this._mangaPanY) / this._mangaZoomLevel;
                const newPanX = touchCenterX - (imageOriginX * newZoom);
                const newPanY = touchCenterY - (imageOriginY * newZoom);
                
                this._mangaZoomLevel = newZoom; 
                this.applyZoomAndPan(targetElement, this._mangaZoomLevel, newPanX, newPanY, true);
                
            } else if (e.touches.length === 1 && !this._mangaIsPanning && !this._mangaIsPinching) {
                this._mangaLastTouchX = e.touches[0].clientX; this._mangaLastTouchY = e.touches[0].clientY;
            }
        }

        handleTouchEnd(e) {
            const currentTime = new Date().getTime();
            const tapThreshold = 300; 
            const swipeThreshold = 50; 

            if (this._mangaIsPanning) {
                this._mangaIsPanning = false; this.mangaPagesOuterContainer.classList.remove('grabbing');
            } else if (this._mangaIsPinching) {
                this._mangaIsPinching = false;
                if (this._mangaZoomLevel <= this._mangaMinZoom + 0.05) {
                    this.resetZoomAndPan(true); 
                } 
            } else if (e.changedTouches.length === 1 && this._mangaZoomLevel <= this._mangaMinZoom + 0.05) { 
                const deltaX = this._mangaLastTouchX - this._mangaTouchStartX;
                const deltaY = this._mangaLastTouchY - this._mangaTouchStartY;

                if (Math.abs(deltaX) > swipeThreshold || Math.abs(deltaY) > swipeThreshold) { 
                    if (this._currentMode === 'horizontal' && Math.abs(deltaX) > Math.abs(deltaY)) {
                        this.navigatePage(deltaX < 0 ? 1 : -1); 
                    } 
                } else { 
                    if (currentTime - this._mangaLastTapTime < tapThreshold) { 
                        const targetElement = this._getCurrentMangaElementForZoom();
                        if (targetElement) {
                            if (this._mangaZoomLevel > this._mangaMinZoom) {
                                this.resetZoomAndPan(true);
                            } else {
                                const rect = this.mangaPagesOuterContainer.getBoundingClientRect();
                                const tapX = e.changedTouches[0].clientX - rect.left;
                                const tapY = e.changedTouches[0].clientY - rect.top;
                                const originX = (tapX - this._mangaPanX) / this._mangaZoomLevel;
                                const originY = (tapY - this._mangaPanY) / this._mangaZoomLevel;
                                const targetZoom = 2;
                                const newPanX = tapX - (originX * targetZoom);
                                const newPanY = tapY - (originY * targetZoom);
                                this.applyZoomAndPan(targetElement, targetZoom, newPanX, newPanY, true);
                            }
                        }
                        this._mangaLastTapTime = 0; 
                    } else {
                        this.toggleControls(); 
                    }
                    this._mangaLastTapTime = currentTime;
                }
            } else if (e.changedTouches.length === 1 && this._mangaZoomLevel > this._mangaMinZoom + 0.05) {
                 this.toggleControls();
                 this._mangaLastTapTime = currentTime; 
            }
            this._mangaLastTouchX = 0; this._mangaLastTouchY = 0;
        }

        getDistanceBetweenTouches(touches) {
            const dx = touches[0].clientX - touches[1].clientX;
            const dy = touches[0].clientY - touches[1].clientY;
            return Math.sqrt(dx * dx + dy * dy);
        }

        applyZoomAndPan(element, scale, panX, panY, restrictPan = false) {
            if (!element) return;
            this._mangaZoomLevel = scale;
            
            if (restrictPan) {
                const outerRect = this.mangaPagesOuterContainer.getBoundingClientRect();
                let elementWidth = element.offsetWidth; 
                let elementHeight = element.offsetHeight;
                
                if (this._currentMode === 'vertical' && element.tagName === 'IMG') {
                     elementWidth = element.naturalWidth || element.offsetWidth;
                     elementHeight = element.naturalHeight || element.offsetHeight;
                }

                const scaledWidth = elementWidth * scale; 
                const scaledHeight = elementHeight * scale;

                let finalPanX = panX; let finalPanY = panY;
                if (scaledWidth > outerRect.width) {
                    const maxPanX = (scaledWidth - outerRect.width) / 2;
                    finalPanX = Math.max(-maxPanX, Math.min(maxPanX, panX));
                } else {
                    finalPanX = 0; 
                }
                if (scaledHeight > outerRect.height) {
                    const maxPanY = (scaledHeight - outerRect.height) / 2;
                    finalPanY = Math.max(-maxPanX, Math.min(maxPanY, panY));
                } else {
                    finalPanY = 0; 
                }
                this._mangaPanX = finalPanX; this._mangaPanY = finalPanY;
            } else {
                 this._mangaPanX = panX; this._mangaPanY = panY;
            }
            element.style.transform = `scale(${this._mangaZoomLevel}) translate(${this._mangaPanX}px, ${this._mangaPanY}px)`;
        }

        resetZoomAndPan(applyTransform = true) {
            this._mangaZoomLevel = 1; this._mangaPanX = 0; this._mangaPanY = 0;
            this._mangaIsPanning = false; this._mangaIsPinching = false;
            this.mangaPagesOuterContainer.classList.remove('grabbing');
            if (applyTransform) {
                const targetElement = this._getCurrentMangaElementForZoom();
                if (targetElement) targetElement.style.transform = `scale(1) translate(0px, 0px)`;
            }
        }
        
        toggleControls() {
            this._mangaControlsVisible = !this._mangaControlsVisible;
            if (this._mangaControlsVisible) this.showControls(true);
            else this.hideControls();
        }

        showControls(autoHide = true) {
            this.mangaModal.classList.remove('controls-hidden');
            this._mangaControlsVisible = true; 
            clearTimeout(this._mangaControlsTimeoutId);
            if (autoHide && this._mangaZoomLevel <= this._mangaMinZoom + 0.05) { 
                this._mangaControlsTimeoutId = setTimeout(() => this.hideControls(), 4000);
            }
        }

        hideControls() {
            this.mangaModal.classList.add('controls-hidden');
            this._mangaControlsVisible = false; clearTimeout(this._mangaControlsTimeoutId);
        }

        handleWheelScroll(e) {
            if (!this.mangaModal.classList.contains('flex') || this._mangaIsPinching) return;
            const targetElement = this._getCurrentMangaElementForZoom();
            if (!targetElement) return;

            if (this._mangaZoomLevel > 1.01) {  // Using 1.01 as a small tolerance for float comparison
                e.preventDefault(); 
                const newPanX = this._mangaPanX - e.deltaX; 
                const newPanY = this._mangaPanY - e.deltaY;
                this.applyZoomAndPan(targetElement, this._mangaZoomLevel, newPanX, newPanY, true);
                this.showControls();
                return;
            }
            
            if (this._currentMode === 'horizontal') {
                e.preventDefault(); 
                this.navigatePage(Math.sign(e.deltaX || e.deltaY)); 
            }
            // In vertical mode, if not zoomed, default browser scroll of mangaPagesContainer is allowed.
            this.showControls();
        }

        handleKeyboard(e) { 
            if (this._mangaIsPanning || this._mangaIsPinching) return;

            const activeElement = document.activeElement;
            if (activeElement && this.mangaModal.contains(activeElement)) {
                if (activeElement.tagName === 'BUTTON' && (e.key === ' ' || e.key === 'Enter')) {
                    return; 
                }
            }
            
            let eventHandled = false;

            if (e.key === 'Escape') {
                e.preventDefault();
                this.close();
                eventHandled = true;
            } 
            
            if (!eventHandled && this._mangaZoomLevel <= 1.01) { // Check if not zoomed
                let navigatedByPageKeys = false;
                let scrolledContainer = false;

                switch (e.key) {
                    case 'ArrowDown': 
                        if (this._currentMode === 'vertical') { 
                            e.preventDefault();
                            this.mangaPagesContainer.scrollTop += 40; 
                            scrolledContainer = true;
                        } 
                        break;
                    case 'ArrowUp': 
                        if (this._currentMode === 'vertical') { 
                            e.preventDefault();
                            this.mangaPagesContainer.scrollTop -= 40;
                            scrolledContainer = true;
                        } 
                        break;
                    case 'ArrowRight': 
                        if (this._currentMode === 'horizontal') { 
                            e.preventDefault(); this.navigatePage(-1); navigatedByPageKeys = true; 
                        } 
                        break;
                    case 'ArrowLeft': 
                        if (this._currentMode === 'horizontal') { 
                            e.preventDefault(); this.navigatePage(1); navigatedByPageKeys = true; 
                        } 
                        break;
                    case 'PageDown': 
                        e.preventDefault();
                        if (this._currentMode === 'vertical') {
                            this.mangaPagesContainer.scrollTop += this.mangaPagesContainer.clientHeight * 0.9;
                            scrolledContainer = true;
                        } else {
                            this.navigatePage(1); navigatedByPageKeys = true; 
                        }
                        break;
                    case 'PageUp': 
                        e.preventDefault();
                        if (this._currentMode === 'vertical') {
                            this.mangaPagesContainer.scrollTop -= this.mangaPagesContainer.clientHeight * 0.9;
                            scrolledContainer = true;
                        } else {
                            this.navigatePage(-1); navigatedByPageKeys = true;
                        }
                        break;
                }
                if (navigatedByPageKeys || scrolledContainer) {
                    eventHandled = true;
                }
            }

            if (eventHandled) {
                this.showControls();
            }
        }
    }


    // --- CONTENT MANAGER (Coordinator) ---
    const contentManager = {
        currentLang: 'jp',
        lastScroll: 0,
        videoPlayer: null,
        mangaPlayer: null,

        init() {
            this.videoPlayer = new VideoPlayer();
            this.mangaPlayer = new MangaPlayer();
            this.setupEventListeners();
            this.addScrollListener();
            this.updateContentVisibility();
        },

        setupEventListeners() {
            document.querySelectorAll('.format-button').forEach(btn => {
                btn.addEventListener('click', (e) => this.handleLanguageChange(e.currentTarget));
            });

            document.addEventListener('click', (e) => {
                const playButton = e.target.closest('.episode-play');
                const readButton = e.target.closest('.read-button');
                const bookContainer = e.target.closest('.book-container');

                if (playButton && playButton.closest('.episode-card')) { 
                    const card = playButton.closest('.episode-card');
                    if (card && !card.classList.contains('content-unavailable')) {
                        const videoUrlData = card.dataset[`src${this.currentLang}`];
                        const subtitleUrl = card.dataset.subtitles;
                        if (videoUrlData && videoUrlData.trim() !== '' && videoUrlData !== 'null') {
                            this.videoPlayer.open(videoUrlData, subtitleUrl);
                        }
                    }
                } else if (readButton) { 
                    const book = readButton.closest('.book-container');
                     if (book && !book.classList.contains('content-unavailable')) {
                        const mangaData = book.dataset[`src${this.currentLang}`];
                        if (mangaData && mangaData.trim() !== '' && mangaData !== 'null') {
                            if (window.matchMedia("(max-width: 768px)").matches && !book.classList.contains('active-mobile')) {
                                document.querySelectorAll('.book-container.active-mobile').forEach(activeBook => activeBook.classList.remove('active-mobile'));
                                book.classList.add('active-mobile'); 
                            }
                            this.mangaPlayer.open(mangaData);
                        }
                    }
                } else if (bookContainer) { 
                    if (window.matchMedia("(max-width: 768px)").matches) {
                        if (bookContainer.classList.contains('active-mobile')) {
                            bookContainer.classList.remove('active-mobile');
                        } else {
                            document.querySelectorAll('.book-container.active-mobile').forEach(activeBook => {
                                activeBook.classList.remove('active-mobile');
                            });
                            bookContainer.classList.add('active-mobile');
                        }
                    } 
                } else if (!e.target.closest('.manga-modal') && !e.target.closest('.video-modal') && !e.target.closest('.support-hub-container')) { 
                     if (window.matchMedia("(max-width: 768px)").matches) {
                        document.querySelectorAll('.book-container.active-mobile').forEach(activeBook => {
                            activeBook.classList.remove('active-mobile');
                        });
                    }
                }
            });

            document.addEventListener('keydown', (e) => {
                if (this.videoPlayer && this.videoPlayer.playerModal.style.display === 'block') {
                    this.videoPlayer.handleKeyboard(e);
                } else if (this.mangaPlayer && this.mangaPlayer.mangaModal.classList.contains('flex')) {
                    this.mangaPlayer.handleKeyboard(e);
                }
            });
        },

        addScrollListener() {
            let lastKnownScrollPosition = 0;
            let ticking = false;
            const navbar = document.querySelector('.detail-nav');
            if (!navbar) return;

            window.addEventListener('scroll', () => {
                lastKnownScrollPosition = window.pageYOffset;
                if (!ticking) {
                    window.requestAnimationFrame(() => {
                        const currentScroll = lastKnownScrollPosition;
                        if (currentScroll > 100 && currentScroll > this.lastScroll) navbar.classList.add('nav-hidden');
                        else navbar.classList.remove('nav-hidden');
                        this.lastScroll = currentScroll <= 0 ? 0 : currentScroll;
                        ticking = false;
                    });
                    ticking = true;
                }
            }, { passive: true });
        },

        handleLanguageChange(button) {
            if (button.classList.contains('active')) return;
            document.querySelectorAll('.format-button').forEach(b => {
                b.classList.remove('active'); b.setAttribute('aria-pressed', 'false');
            });
            button.classList.add('active'); button.setAttribute('aria-pressed', 'true');
            this.currentLang = button.dataset.lang;
            this.updateContentVisibility();
        },

        processBatch(items, action, batchSize = 10, index = 0) {
            const batch = items.slice(index, index + batchSize);
            batch.forEach(item => action(item));

            if (index + batchSize < items.length) {
                requestAnimationFrame(() => this.processBatch(items, action, batchSize, index + batchSize));
            }
        },

        updateContentVisibility() {
            const episodeCards = Array.from(document.querySelectorAll('.episode-card[data-lid]'));
             this.processBatch(episodeCards, card => {
                const srcKey = `src${this.currentLang}`;
                const available = card.dataset[srcKey] && card.dataset[srcKey] !== 'null' && card.dataset[srcKey].trim() !== '';
                card.classList.toggle('content-unavailable', !available);
                const playButton = card.querySelector('.episode-play');
                if (playButton) playButton.disabled = !available;
            });

            const bookContainers = Array.from(document.querySelectorAll('.book-container'));
            this.processBatch(bookContainers, book => {
                const langAttr = `data-src${this.currentLang}`;
                const available = book.getAttribute(langAttr) && book.getAttribute(langAttr) !== 'null' && book.getAttribute(langAttr).trim() !== '';
                book.classList.toggle('content-unavailable', !available);
                const readButton = book.querySelector('.read-button');
                if (readButton) readButton.disabled = !available;
                if (!available) book.classList.remove('active-mobile');
            });
        }
    };

    document.addEventListener('DOMContentLoaded', () => {
        contentManager.init();
    });

})();
</script>

<script>
  document.getElementById('toggleCommentsBtn').addEventListener('click', function () {
    const commentsSection = document.getElementById('commentsSection');

    // Mostrar la sección si está oculta
    if (commentsSection.style.display === 'none') {
      commentsSection.style.display = 'block';
      this.textContent = '❌ Ocultar comentarios';

      // Crear dinámicamente el script de Giscus (solo si no se ha cargado antes)
      if (!document.querySelector('.giscus-frame')) {
        const script = document.createElement('script');
        script.src = 'https://giscus.app/client.js'; 
        script.setAttribute('data-repo', 'RemastersAnime4k/RemastersAnime4k.github.io');
        script.setAttribute('data-repo-id', 'R_kgDOPc708Q');
        script.setAttribute('data-category', 'Announcements');
        script.setAttribute('data-category-id', 'DIC_kwDOPc708c4CuJNY');
        script.setAttribute('data-mapping', 'pathname');
        script.setAttribute('data-strict', '1');
        script.setAttribute('data-reactions-enabled', '0');
        script.setAttribute('data-emit-metadata', '0');
        script.setAttribute('data-input-position', 'top');
        script.setAttribute('data-theme', 'light');
        script.setAttribute('data-lang', 'es');
        script.setAttribute('crossorigin', 'anonymous');
        script.async = true;
        script.className = 'giscus-frame'; // Para evitar recargarlo
        commentsSection.appendChild(script);
      }
    } else {
      // Ocultar comentarios sin recargarlos
      commentsSection.style.display = 'none';
      this.textContent = '💬 Ver comentarios';
    }
  });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const tabsContainer = document.querySelector('.support-tabs');
        if (!tabsContainer) return;

        const tabs = tabsContainer.querySelectorAll('.support-tab');
        const panels = document.querySelectorAll('.support-panel');
        
        tabsContainer.addEventListener('click', (e) => {
            const clickedTab = e.target.closest('.support-tab');
            if (!clickedTab) return;

            tabs.forEach(tab => {
                tab.classList.remove('active');
                tab.setAttribute('aria-selected', 'false');
            });
            panels.forEach(panel => {
                panel.style.display = 'none';
            });

            clickedTab.classList.add('active');
            clickedTab.setAttribute('aria-selected', 'true');

            const targetPanelId = clickedTab.getAttribute('aria-controls');
            const targetPanel = document.getElementById(targetPanelId);
            if (targetPanel) {
                targetPanel.style.display = 'block';
            }
        });

        const commentLinkBtn = document.getElementById('comment-link-btn');
        const commentsSection = document.getElementById('commentsSection');
        if (commentLinkBtn && commentsSection) {
            commentLinkBtn.addEventListener('click', (e) => {
                e.preventDefault();
                const toggleBtn = document.getElementById('toggleCommentsBtn');
                if (commentsSection.style.display === 'none') {
                    toggleBtn.click();
                }
                setTimeout(() => {
                   commentsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100); 
            });
        }
    });
</script>

<script>
// --- Smart Ad System (Improved) ---
document.addEventListener('DOMContentLoaded', () => {
    const adPanel = document.getElementById('panel-ads');
    if (!adPanel) return;

    // Observa cambios en el panel de anuncios para saber cuándo se hace visible.
    const observer = new MutationObserver((mutations) => {
        for (let mutation of mutations) {
            if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                if (adPanel.style.display === 'block' && !adPanel.dataset.adLoaded) {
                    initializeAdSystem();
                    adPanel.dataset.adLoaded = 'true'; // Previene recargas
                }
            }
        }
    });

    observer.observe(adPanel, { attributes: true });

    // Ejecuta el sistema si el panel ya es visible al cargar la página.
    if (adPanel.style.display === 'block' && !adPanel.dataset.adLoaded) {
        initializeAdSystem();
        adPanel.dataset.adLoaded = 'true';
    }
});

// Función principal que inicia el proceso de carga de anuncios.
function initializeAdSystem() {
    const adSlotContainer = document.getElementById('ad-slot-container');
    if (!adSlotContainer) {
        console.error("Ad slot container not found.");
        return;
    }

    // Plan A: Intentar cargar el anuncio dinámico.
    loadDynamicAd(adSlotContainer);

    // Plan B: Iniciar un temporizador para verificar si el Plan A funcionó.
    setTimeout(() => {
        const adIframe = adSlotContainer.querySelector('iframe');
        
        // La condición de fallo: no hay iframe o es un iframe de rastreo muy pequeño.
        if (!adIframe || adIframe.offsetHeight < 50) {
            loadFallbackAd(adSlotContainer);
        }
    }, 3000); // Un temporizador de 3 segundos da tiempo suficiente para que el ad cargue.
}

// Función para el Plan A: Cargar el anuncio de Adsterra.
function loadDynamicAd(container) {
    // 1. Limpiar el contenedor y mostrar un estado de carga.
    container.innerHTML = `
        <div class="asd-container loading-ad">
        </div>
    `;

    // 2. Definir las opciones de Adsterra.
    window.atOptions = {
        'key': 'd5c23d95be4a77b53674f427915af0de',
        'format': 'iframe',
        'height': 250,
        'width': 300,
        'params': {}
    };

    // 3. Crear e inyectar el script de Adsterra dinámicamente.
    const adScript = document.createElement('script');
    adScript.type = 'text/javascript';
    adScript.async = true;
    adScript.src = '//www.highperformanceformat.com/d5c23d95be4a77b53674f427915af0de/invoke.js';
    
    // Si el script en sí no puede cargarse (error de red, etc.), activa el Plan B.
    adScript.onerror = () => {
        console.warn("Adsterra script failed to load (network error).");
        loadFallbackAd(container);
    };

    // Añade el script al DOM.
    const loadingContainer = container.querySelector('.asd-container');
    if(loadingContainer) {
       loadingContainer.appendChild(adScript);
    } else {
       container.appendChild(adScript);
    }
}

// Función para el Plan B: Cargar el anuncio de respaldo estático.
function loadFallbackAd(container) {
    // Prevenir que se ejecute dos veces.
    if (container.querySelector('.fallback-ad')) return;

    console.log("Ad-blocker detected or ad failed to load. Displaying fallback.");
    
    // Define el HTML interno del banner de respaldo.
    const fallbackHTML = `
        <a href="https://remastersanime4k.github.io/Espacio-Publicitario.html" target="_blank" rel="noopener noreferrer">
            <img src="https://i.pinimg.com/736x/11/15/2d/11152dc45f236704097ab8582b865acb.jpg" class="asd-image" alt="Publicidad Alternativa" loading="lazy">
            <div class="asd-content">
                <h3 class="asd-title">¡Tu apoyo hace la diferencia! ❤️</h3>
                <p class="asd-description">Tu visita a los patrocinadores hace posible que sigamos compartiendo tu anime favorito en 4K</p>
                <div class="asd-cta">Visitar</div>
            </div>
        </a>
    `;

    // Reemplaza el contenido del contenedor con el banner de respaldo.
    container.innerHTML = `
        <div class="asd-container fallback-ad">
            <div class="asd-badge">PUBLICIDAD</div>
            ${fallbackHTML}
        </div>
    `;
}
</script>
</body>
</html>
